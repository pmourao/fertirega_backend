{
  "entityType" : "DASHBOARD",
  "entity" : {
    "assignedCustomers" : null,
    "configuration" : {
      "description" : "",
      "widgets" : {
        "c5f8412d-2ffb-4c44-7a7f-223ceea08d84" : {
          "type" : "latest",
          "sizeX" : 8.5,
          "sizeY" : 6,
          "config" : {
            "datasources" : [ {
              "type" : "device",
              "deviceId" : "d8969750-c316-11f0-93ad-355a87ef80c4",
              "dataKeys" : [ {
                "name" : "lat",
                "type" : "attribute",
                "label" : "lat",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.6729822795010593
              }, {
                "name" : "lon",
                "type" : "attribute",
                "label" : "lon",
                "color" : "#ffc107",
                "settings" : { },
                "_hash" : 0.24724092035267375
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              }
            }, {
              "type" : "entity",
              "deviceId" : "d8969750-c316-11f0-93ad-355a87ef80c4",
              "entityAliasId" : "cd737d26-3068-aae0-d370-c93f8e7e1a00",
              "dataKeys" : [ {
                "name" : "polygon_coordinates",
                "type" : "attribute",
                "label" : "polygon_coordinates",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.3758939725843281
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              }
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1667907617960,
                  "endTimeMs" : 1667994017960
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "#fff",
            "color" : "rgba(0,0,0,0.87)",
            "padding" : "0px",
            "settings" : {
              "provider" : "openstreet-map",
              "gmApiKey" : "AIzaSyDoEx2kaGz3PxwbI9T7ccTSg5xjdw8Nw8Q",
              "gmDefaultMapType" : "roadmap",
              "mapProvider" : "Esri.WorldImagery",
              "useCustomProvider" : false,
              "customProviderTileUrl" : "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
              "mapProviderHere" : "HERE.normalDay",
              "credentials" : {
                "useV3" : true,
                "app_id" : "AhM6TzD9ThyK78CT3ptx",
                "app_code" : "p6NPiITB3Vv0GMUFnkLOOg",
                "apiKey" : "kVXykxAfZ6LS4EbCTO02soFVfjA7HoBzNVVH9u7nzoE"
              },
              "mapImageUrl" : "tb-image;/api/images/system/here_map_system_widget_map_image.svg",
              "imageEntityAlias" : "",
              "imageUrlAttribute" : "",
              "tmApiKey" : "84d6d83e0e51e481e50454ccbe8986b",
              "tmDefaultMapType" : "roadmap",
              "latKeyName" : "lat",
              "lngKeyName" : "lon",
              "xPosKeyName" : "xPos",
              "yPosKeyName" : "yPos",
              "defaultZoomLevel" : null,
              "defaultCenterPosition" : "0,0",
              "disableScrollZooming" : false,
              "disableDoubleClickZooming" : false,
              "disableZoomControl" : false,
              "fitMapBounds" : true,
              "useDefaultCenterPosition" : false,
              "mapPageSize" : 16384,
              "markerOffsetX" : 0.5,
              "markerOffsetY" : 1,
              "posFunction" : "return {x: origXPos, y: origYPos};",
              "draggableMarker" : true,
              "showLabel" : true,
              "useLabelFunction" : false,
              "label" : "${entityName}",
              "labelFunction" : null,
              "showTooltip" : true,
              "showTooltipAction" : "click",
              "autocloseTooltip" : true,
              "useTooltipFunction" : false,
              "tooltipPattern" : "<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}<br/><b>Temperature:</b> ${temperature} °C<br/><small>See advanced settings for details</small>",
              "tooltipFunction" : null,
              "tooltipOffsetX" : 0,
              "tooltipOffsetY" : -1,
              "color" : "#fe7569",
              "useColorFunction" : false,
              "colorFunction" : null,
              "useMarkerImageFunction" : false,
              "markerImage" : null,
              "markerImageSize" : 34,
              "markerImageFunction" : null,
              "markerImages" : [ ],
              "showPolygon" : true,
              "polygonKeyName" : "polygon_coordinates",
              "editablePolygon" : false,
              "showPolygonLabel" : false,
              "usePolygonLabelFunction" : false,
              "polygonLabel" : "${entityName}",
              "polygonLabelFunction" : null,
              "showPolygonTooltip" : true,
              "showPolygonTooltipAction" : "click",
              "autoClosePolygonTooltip" : true,
              "usePolygonTooltipFunction" : false,
              "polygonTooltipPattern" : "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
              "polygonTooltipFunction" : null,
              "polygonColor" : "#3388ff",
              "polygonOpacity" : 0.2,
              "usePolygonColorFunction" : false,
              "polygonColorFunction" : null,
              "polygonStrokeColor" : "#3388ff",
              "polygonStrokeOpacity" : 1,
              "polygonStrokeWeight" : 3,
              "usePolygonStrokeColorFunction" : false,
              "polygonStrokeColorFunction" : null,
              "showCircle" : false,
              "circleKeyName" : "perimeter",
              "editableCircle" : false,
              "showCircleLabel" : false,
              "useCircleLabelFunction" : false,
              "circleLabel" : "${entityName}",
              "circleLabelFunction" : null,
              "showCircleTooltip" : false,
              "showCircleTooltipAction" : "click",
              "autoCloseCircleTooltip" : true,
              "useCircleTooltipFunction" : false,
              "circleTooltipPattern" : "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
              "circleTooltipFunction" : null,
              "circleFillColor" : "#3388ff",
              "circleFillColorOpacity" : 0.2,
              "useCircleFillColorFunction" : false,
              "circleFillColorFunction" : null,
              "circleStrokeColor" : "#3388ff",
              "circleStrokeOpacity" : 1,
              "circleStrokeWeight" : 3,
              "useCircleStrokeColorFunction" : false,
              "circleStrokeColorFunction" : null,
              "snappable" : false,
              "initDragMode" : false,
              "hideAllControlButton" : false,
              "hideDrawControlButton" : false,
              "hideEditControlButton" : false,
              "hideRemoveControlButton" : false,
              "useClusterMarkers" : false,
              "zoomOnClick" : true,
              "maxZoom" : null,
              "maxClusterRadius" : 80,
              "animate" : true,
              "spiderfyOnMaxZoom" : false,
              "showCoverageOnHover" : true,
              "chunkedLoading" : false,
              "removeOutsideVisibleBounds" : true,
              "useIconCreateFunction" : false,
              "clusterMarkerFunction" : null
            },
            "title" : "Fields",
            "dropShadow" : true,
            "enableFullscreen" : true,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "widgetStyle" : { },
            "actions" : {
              "markerClick" : [ ],
              "polygonClick" : [ {
                "name" : "Field details",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "${entityName}",
                "setEntityId" : true,
                "stateEntityParamName" : "field",
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "6feadbe9-7088-fccc-2cbc-dcde695df002"
              } ]
            },
            "showTitleIcon" : false,
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "displayTimewindow" : true
          },
          "row" : 0,
          "col" : 0,
          "id" : "c5f8412d-2ffb-4c44-7a7f-223ceea08d84",
          "typeFullFqn" : "system.maps_v2.openstreetmap"
        },
        "8ce15aad-9ab2-55ce-2628-a663814d27b1" : {
          "type" : "latest",
          "sizeX" : 7.5,
          "sizeY" : 6.5,
          "config" : {
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1667907617961,
                  "endTimeMs" : 1667994017961
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "entitiesTitle" : "Fields",
              "enableSearch" : true,
              "enableSelectColumnDisplay" : true,
              "enableStickyHeader" : true,
              "enableStickyAction" : true,
              "reserveSpaceForHiddenAction" : "true",
              "displayEntityName" : false,
              "displayEntityLabel" : false,
              "displayEntityType" : false,
              "displayPagination" : true,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "Name",
              "useRowStyleFunction" : true,
              "rowStyleFunction" : "var criticalAlarms = entity['criticalAlarmsCount'] || 0;\nvar majorAlarms = entity['majorAlarmsCount'] || 0;\n\nif (criticalAlarms > 0) {\n    return {\n        backgroundColor: '#ffebee',\n        borderLeft: '4px solid #d32f2f'\n    };\n} else if (majorAlarms > 0) {\n    return {\n        backgroundColor: '#fff3e0',\n        borderLeft: '4px solid #ff9800'\n    };\n} else {\n    return {\n        borderLeft: '4px solid #4caf50'\n    };\n}"
            },
            "title" : "New Entities table",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400,
              "padding" : "5px 10px 5px 10px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "cd737d26-3068-aae0-d370-c93f8e7e1a00",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "name",
                "type" : "entityField",
                "label" : "Name",
                "color" : "#ffc107",
                "settings" : {
                  "columnWidth" : "30%",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false,
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled",
                  "columnExportOption" : "onlyVisible"
                },
                "_hash" : 0.7231686834210371,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "label",
                "type" : "entityField",
                "label" : "Label",
                "color" : "#2196f3",
                "settings" : {
                  "columnWidth" : "30%",
                  "useCellStyleFunction" : true,
                  "cellStyleFunction" : "return {\n    fontWeight: 600\n};",
                  "useCellContentFunction" : true,
                  "cellContentFunction" : "return value ? '<span style=\"background: rgba(111, 116, 242, 0.08); border-radius: 16px; padding: 4px 8px; color: #5553AF;\">'+value+'</span>' : '';",
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled",
                  "columnExportOption" : "onlyVisible"
                },
                "_hash" : 0.7427597097428846,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "cropType",
                "type" : "attribute",
                "label" : "Crop type",
                "color" : "#4caf50",
                "settings" : {
                  "columnWidth" : "20%",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false,
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled",
                  "columnExportOption" : "onlyVisible"
                },
                "_hash" : 0.45735173845667054,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "avgMoisture",
                "type" : "timeseries",
                "label" : "Average moisture",
                "color" : "#f44336",
                "settings" : {
                  "columnWidth" : "20%",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : true,
                  "cellContentFunction" : "if (value) {\n    var minMoistureThreshold = entity['minMoistureThreshold'];\n    var maxMoistureThreshold = entity['maxMoistureThreshold'];\n    var background = '111, 116, 242';\n    var textColor = '#5553AF';\n    if (value < minMoistureThreshold || value > maxMoistureThreshold) {\n        background = '209, 39, 48';\n        textColor = '#D12730';\n    }\n    var percent = value + '%';\n    var percentText = value.toFixed(0) + '%';\n    return '<div style=\"width: 100%; max-width: 100px; height: 16px; background: linear-gradient(to right, rgba('+background+', 0.16) '+percent+', rgba('+background+', 0.08) '+percent+'); border-radius: 5.21053px; line-height: normal;\"><span style=\"padding-left: 4px; font-weight: 600; font-size: 13px; color: '+textColor+';\">'+percentText+'</span></div>';\n} else {\n    return 'No data';\n}",
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled",
                  "columnExportOption" : "onlyVisible"
                },
                "_hash" : 0.017767185128356955,
                "aggregationType" : "NONE",
                "units" : "%",
                "decimals" : 0,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "minMoistureThreshold",
                "type" : "attribute",
                "label" : "minMoistureThreshold",
                "color" : "#8bc34a",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false,
                  "defaultColumnVisibility" : "hidden",
                  "columnSelectionToDisplay" : "disabled",
                  "columnExportOption" : "onlyVisible"
                },
                "_hash" : 0.5565658823011432,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "maxMoistureThreshold",
                "type" : "attribute",
                "label" : "maxMoistureThreshold",
                "color" : "#3f51b5",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false,
                  "defaultColumnVisibility" : "hidden",
                  "columnSelectionToDisplay" : "disabled",
                  "columnExportOption" : "onlyVisible"
                },
                "_hash" : 0.860782325530304,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "irrigationState",
                "type" : "timeseries",
                "label" : "Irrigation",
                "color" : "#8bc34a",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : true,
                  "cellContentFunction" : "var text = value === 'ON' ? 'On' : 'Off';\nvar color = value === 'ON' ? '#198038' : 'red';\nreturn '<div><span style=\"width: 4px; height: 4px; border-radius: 2px; background: '+color+'; display: inline-block; vertical-align: middle;\"></span><span style=\"padding-left: 8px;\">'+text+'</span></div>';",
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled",
                  "columnExportOption" : "onlyVisible"
                },
                "_hash" : 0.20197437452090683,
                "aggregationType" : "NONE",
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ]
            } ],
            "displayTimewindow" : true,
            "actions" : {
              "rowClick" : [ {
                "name" : "Field details",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "${entityName}",
                "setEntityId" : true,
                "stateEntityParamName" : "field",
                "openRightLayout" : false,
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "9fac49b3-0e6b-9beb-56a7-6da9cec34984"
              } ],
              "headerButton" : [ {
                "name" : "Create field",
                "icon" : "add",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "customPretty",
                "customHtml" : "<form #addPerimeterForm=\"ngForm\" [formGroup]=\"addPerimeterFormGroup\"\n      (ngSubmit)=\"save()\" class=\"add-perimeter-form\">\n    <mat-toolbar fxLayout=\"row\" color=\"primary\">\n        <h2>Add Irrigation Perimeter</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n    </mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        \n        <!-- Basic Information -->\n        <div class=\"section-title\">Basic Information</div>\n        <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Perimeter Name</mat-label>\n                <input matInput formControlName=\"entityName\" required placeholder=\"e.g., North Field A\">\n                <mat-error *ngIf=\"addPerimeterFormGroup.get('entityName').hasError('required')\">\n                    Perimeter name is required.\n                </mat-error>\n            </mat-form-field>\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Label</mat-label>\n                <input matInput formControlName=\"entityLabel\" placeholder=\"Optional display label\">\n            </mat-form-field>\n        </div>\n\n        <!-- Perimeter Details -->\n        <div formGroupName=\"attributes\" fxLayout=\"column\">\n            <div class=\"section-title\">Perimeter Details</div>\n            \n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Area (hectares)</mat-label>\n                    <input type=\"number\" step=\"0.01\" matInput formControlName=\"area_hectares\" placeholder=\"2.5\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Crop Type</mat-label>\n                    <input matInput formControlName=\"crop_type\" placeholder=\"e.g., Vegetables, Corn\">\n                </mat-form-field>\n            </div>\n\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Soil Type</mat-label>\n                    <mat-select formControlName=\"soil_type\">\n                        <mat-option value=\"sandy\">Sandy</mat-option>\n                        <mat-option value=\"clay\">Clay</mat-option>\n                        <mat-option value=\"loam\">Loam</mat-option>\n                        <mat-option value=\"silt\">Silt</mat-option>\n                        <mat-option value=\"mixed\">Mixed</mat-option>\n                    </mat-select>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Location</mat-label>\n                    <input matInput formControlName=\"location\" placeholder=\"e.g., North Section\">\n                </mat-form-field>\n            </div>\n\n            <!-- Polygon Coordinates -->\n            <mat-form-field class=\"mat-block\">\n                <mat-label>Polygon Coordinates (JSON)</mat-label>\n                <textarea matInput \n                          formControlName=\"polygon_coordinates\" \n                          rows=\"4\" \n                          class=\"polygon-input\"\n                          placeholder='[[39.148,-8.689],[39.147,-8.688],...]'\n                          required>\n                </textarea>\n                <mat-error *ngIf=\"addPerimeterFormGroup.get('attributes.polygon_coordinates').hasError('required')\">\n                    Polygon coordinates are required.\n                </mat-error>\n                <mat-error *ngIf=\"addPerimeterFormGroup.get('attributes.polygon_coordinates').hasError('invalidJson')\">\n                    Invalid JSON format. Please provide valid coordinates.\n                </mat-error>\n            </mat-form-field>\n            <div class=\"helper-text\">\n                Enter coordinates in [latitude, longitude] format as a JSON array.\n            </div>\n\n            <!-- Additional Fields -->\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Center Latitude</mat-label>\n                    <input type=\"number\" step=\"any\" matInput formControlName=\"latitude\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Center Longitude</mat-label>\n                    <input type=\"number\" step=\"any\" matInput formControlName=\"longitude\">\n                </mat-form-field>\n            </div>\n\n            <mat-form-field class=\"mat-block\">\n                <mat-label>Notes</mat-label>\n                <textarea matInput formControlName=\"notes\" rows=\"2\" placeholder=\"Additional information\"></textarea>\n            </mat-form-field>\n        </div>\n\n        <!-- Device Relations -->\n        <div class=\"relations-list\">\n            <div class=\"section-title\">Connected Devices</div>\n            <div class=\"helper-text\" style=\"margin-top: 0;\">\n                Link irrigation controller devices to this perimeter.\n            </div>\n            \n            <div class=\"body\" [fxShow]=\"relations().length\">\n                <div class=\"row\" fxLayout=\"row\" fxLayoutAlign=\"start center\" \n                     formArrayName=\"relations\" \n                     *ngFor=\"let relation of relations().controls; let i = index;\">\n                    <div [formGroupName]=\"i\" class=\"mat-elevation-z2\" fxFlex fxLayout=\"row\" style=\"padding: 5px 0 5px 5px;\">\n                        <div fxFlex fxLayout=\"column\">\n                            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                                <mat-form-field class=\"mat-block\" style=\"min-width: 100px;\">\n                                    <mat-label>Direction</mat-label>\n                                    <mat-select formControlName=\"direction\" name=\"direction\">\n                                        <mat-option value=\"FROM\">From (Asset → Device)</mat-option>\n                                        <mat-option value=\"TO\">To (Device → Asset)</mat-option>\n                                    </mat-select>\n                                    <mat-error *ngIf=\"relation.get('direction').hasError('required')\">\n                                        Direction is required.\n                                    </mat-error>\n                                </mat-form-field>\n                                <tb-relation-type-autocomplete\n                                        fxFlex class=\"mat-block\"\n                                        formControlName=\"relationType\"\n                                        [required]=\"true\"\n                                        placeholder=\"Contains\">\n                                </tb-relation-type-autocomplete>\n                            </div>\n                            <div fxLayout=\"row\" fxLayout.xs=\"column\">\n                                <tb-entity-select\n                                        fxFlex class=\"mat-block\"\n                                        [required]=\"true\"\n                                        formControlName=\"relatedEntity\">\n                                </tb-entity-select>\n                            </div>\n                        </div>\n                        <div fxLayout=\"column\" fxLayoutAlign=\"center center\">\n                            <button mat-icon-button color=\"primary\"\n                                    aria-label=\"Remove\"\n                                    type=\"button\"\n                                    (click)=\"removeRelation(i)\"\n                                    matTooltip=\"Remove device relation\"\n                                    matTooltipPosition=\"above\">\n                                <mat-icon>close</mat-icon>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div>\n                <button mat-raised-button color=\"primary\"\n                        type=\"button\"\n                        (click)=\"addRelation()\"\n                        matTooltip=\"Link a device to this perimeter\"\n                        matTooltipPosition=\"above\">\n                    <mat-icon>add</mat-icon> Add Device\n                </button>\n            </div>\n        </div>\n    </div>\n    \n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">\n        <button mat-button color=\"primary\"\n                type=\"button\"\n                [disabled]=\"(isLoading$ | async)\"\n                (click)=\"cancel()\" cdkFocusInitial>\n            Cancel\n        </button>\n        <button mat-button mat-raised-button color=\"primary\"\n                type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || addPerimeterForm.invalid || !addPerimeterForm.dirty\">\n            Create Perimeter\n        </button>\n    </div>\n</form>\n\n",
                "customCss" : "/*=======================================================================*/\n/*==================  Irrigation Perimeter Modals  ======================*/\n/*=======================================================================*/\n\n.irrigation-perimeter-form .mat-form-field-infix {\n    width: auto !important;\n}\n\n.irrigation-perimeter-form .polygon-input {\n    font-family: monospace;\n    font-size: 12px;\n}\n\n.irrigation-perimeter-form .section-title {\n    color: rgba(0,0,0,0.87);\n    font-size: 14px;\n    font-weight: 500;\n    margin-top: 16px;\n    margin-bottom: 8px;\n}\n\n.relations-list .mat-form-field-infix {\n    width: auto !important;\n}\n\n.relations-list .body {\n    padding-right: 5px;\n    padding-bottom: 15px;\n    padding-left: 5px;\n}\n\n.relations-list .body .row {\n    padding-top: 5px;\n}\n\n.relations-list .body .md-button {\n    margin: 0;\n}\n\n.add-perimeter-form .helper-text,\n.edit-perimeter-form .helper-text {\n    color: rgba(0,0,0,0.54);\n    font-size: 12px;\n    margin-top: -16px;\n    margin-bottom: 16px;\n}",
                "customFunction" : "/*=======================================================================*/\n/*===============  Irrigation Perimeter CRUD Operations  ================*/\n/*=======================================================================*/\n\nlet $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\nlet attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\nlet entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\n\n// JSON validator function - must be defined at top level\nfunction jsonValidator(control) {\n    if (!control.value) {\n        return null;\n    }\n    try {\n        JSON.parse(control.value);\n        return null;\n    } catch (e) {\n        return { invalidJson: true };\n    }\n}\n\n/*=======================================================================*/\n/*=======================  Add Perimeter Dialog  ========================*/\n/*=======================================================================*/\n\nopenAddPerimeterDialog();\n\nfunction openAddPerimeterDialog() {\n    customDialog.customDialog(htmlTemplate, AddPerimeterDialogController).subscribe();\n}\n\nfunction AddPerimeterDialogController(instance) {\n    let vm = instance;\n\n    vm.entitySearchDirection = {\n        from: \"FROM\",\n        to: \"TO\"\n    };\n\n    vm.addPerimeterFormGroup = vm.fb.group({\n        entityName: ['', [vm.validators.required]],\n        entityType: ['ASSET'],\n        entityLabel: [null],\n        type: ['irrigation_perimeter', [vm.validators.required]],\n        attributes: vm.fb.group({\n            polygon_coordinates: ['', [vm.validators.required, jsonValidator]],\n            area_hectares: [null],\n            crop_type: [null],\n            soil_type: [null],\n            location: [null],\n            latitude: [null],\n            longitude: [null],\n            notes: [null]\n        }),\n        relations: vm.fb.array([])\n    });\n\n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n\n    vm.relations = function() {\n        return vm.addPerimeterFormGroup.get('relations');\n    };\n\n    vm.addRelation = function() {\n        vm.relations().push(vm.fb.group({\n            relatedEntity: [null, [vm.validators.required]],\n            relationType: ['Contains', [vm.validators.required]],\n            direction: ['FROM', [vm.validators.required]]\n        }));\n    };\n\n    vm.removeRelation = function(index) {\n        vm.relations().removeAt(index);\n        vm.relations().markAsDirty();\n    };\n\n    vm.save = function() {\n        vm.addPerimeterFormGroup.markAsPristine();\n        saveAssetObservable().subscribe(\n            function (asset) {\n                widgetContext.rxjs.forkJoin([\n                    saveAttributes(asset.id),\n                    saveRelations(asset.id)\n                ]).subscribe(\n                    function () {\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    }\n                );\n            }\n        );\n    };\n\n    function saveAssetObservable() {\n        const formValues = vm.addPerimeterFormGroup.value;\n        let asset = {\n            name: formValues.entityName,\n            type: formValues.type,\n            label: formValues.entityLabel\n        };\n        return assetService.saveAsset(asset);\n    }\n\n    function saveAttributes(entityId) {\n        let attributes = vm.addPerimeterFormGroup.get('attributes').value;\n        let attributesArray = [];\n        \n        for (let key in attributes) {\n            if (attributes[key] !== null && attributes[key] !== '') {\n                let value = attributes[key];\n                if (key === 'polygon_coordinates' && typeof value === 'string') {\n                    try {\n                        JSON.parse(value);\n                    } catch (e) {\n                        console.error('Invalid polygon JSON:', e);\n                    }\n                }\n                attributesArray.push({key: key, value: value});\n            }\n        }\n        \n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n\n    function saveRelations(entityId) {\n        let relations = vm.addPerimeterFormGroup.get('relations').value;\n        let tasks = [];\n        \n        for (let i = 0; i < relations.length; i++) {\n            let relation = {\n                type: relations[i].relationType,\n                typeGroup: 'COMMON'\n            };\n            if (relations[i].direction == 'FROM') {\n                relation.to = relations[i].relatedEntity;\n                relation.from = entityId;\n            } else {\n                relation.to = entityId;\n                relation.from = relations[i].relatedEntity;\n            }\n            tasks.push(entityRelationService.saveRelation(relation));\n        }\n        \n        if (tasks.length > 0) {\n            return widgetContext.rxjs.forkJoin(tasks);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n}",
                "customResources" : [ ],
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "5b9d0130-b8ab-4103-0223-90a4530d425f"
              } ],
              "actionCellButton" : [ {
                "name" : "Edit field",
                "icon" : "edit",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "customPretty",
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "440ca790-1b01-c774-c4f9-065a2aaa2dce",
                "customHtml" : "<form #editPerimeterForm=\"ngForm\" [formGroup]=\"editPerimeterFormGroup\"\n      (ngSubmit)=\"save()\" class=\"edit-perimeter-form\">\n    <mat-toolbar fxLayout=\"row\" color=\"primary\">\n        <h2>Edit Field: {{fieldName}}</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\">\n    </mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    <div mat-dialog-content fxLayout=\"column\">\n        \n        <!-- Basic Information -->\n        <div class=\"section-title\">Basic Information</div>\n        <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Field Name</mat-label>\n                <input matInput formControlName=\"entityName\" required>\n                <mat-error *ngIf=\"editPerimeterFormGroup.get('entityName').hasError('required')\">\n                    Field name is required.\n                </mat-error>\n            </mat-form-field>\n            <mat-form-field fxFlex class=\"mat-block\">\n                <mat-label>Label</mat-label>\n                <input matInput formControlName=\"entityLabel\">\n            </mat-form-field>\n        </div>\n\n        <!-- Field Details -->\n        <div formGroupName=\"attributes\" fxLayout=\"column\">\n            <div class=\"section-title\">Field Details</div>\n            \n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Area (hectares)</mat-label>\n                    <input type=\"number\" step=\"0.01\" matInput formControlName=\"area_hectares\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Crop Type</mat-label>\n                    <input matInput formControlName=\"cropType\">\n                </mat-form-field>\n            </div>\n\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Soil Type</mat-label>\n                    <mat-select formControlName=\"soil_type\">\n                        <mat-option value=\"sandy\">Sandy</mat-option>\n                        <mat-option value=\"clay\">Clay</mat-option>\n                        <mat-option value=\"loam\">Loam</mat-option>\n                        <mat-option value=\"silt\">Silt</mat-option>\n                        <mat-option value=\"mixed\">Mixed</mat-option>\n                    </mat-select>\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Location</mat-label>\n                    <input matInput formControlName=\"location\">\n                </mat-form-field>\n            </div>\n\n            <mat-form-field class=\"mat-block\">\n                <mat-label>Polygon Coordinates (JSON)</mat-label>\n                <textarea matInput \n                          formControlName=\"polygon_coordinates\" \n                          rows=\"4\" \n                          class=\"polygon-input\"\n                          required>\n                </textarea>\n                <mat-error *ngIf=\"editPerimeterFormGroup.get('attributes.polygon_coordinates').hasError('required')\">\n                    Polygon coordinates are required.\n                </mat-error>\n            </mat-form-field>\n\n            <div fxLayout=\"row\" fxLayoutGap=\"8px\" fxLayout.xs=\"column\" fxLayoutGap.xs=\"0\">\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Min Moisture Threshold (%)</mat-label>\n                    <input type=\"number\" step=\"1\" min=\"0\" max=\"100\" matInput formControlName=\"minMoistureThreshold\">\n                </mat-form-field>\n                <mat-form-field fxFlex class=\"mat-block\">\n                    <mat-label>Max Moisture Threshold (%)</mat-label>\n                    <input type=\"number\" step=\"1\" min=\"0\" max=\"100\" matInput formControlName=\"maxMoistureThreshold\">\n                </mat-form-field>\n            </div>\n\n            <mat-form-field class=\"mat-block\">\n                <mat-label>Notes</mat-label>\n                <textarea matInput formControlName=\"notes\" rows=\"2\"></textarea>\n            </mat-form-field>\n        </div>\n    </div>\n    \n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">\n        <button mat-button color=\"primary\" type=\"button\" [disabled]=\"(isLoading$ | async)\" (click)=\"cancel()\">\n            Cancel\n        </button>\n        <button mat-button mat-raised-button color=\"primary\" type=\"submit\"\n                [disabled]=\"(isLoading$ | async) || editPerimeterForm.invalid\">\n            Update Field\n        </button>\n    </div>\n</form>",
                "customCss" : ".edit-perimeter-form .mat-form-field-infix {\n    width: auto !important;\n}\n\n.edit-perimeter-form .polygon-input {\n    font-family: monospace;\n    font-size: 12px;\n}\n\n.edit-perimeter-form .section-title {\n    color: rgba(0,0,0,0.87);\n    font-size: 14px;\n    font-weight: 500;\n    margin-top: 16px;\n    margin-bottom: 8px;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\nlet attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\n\nopenEditFieldDialog();\n\nfunction openEditFieldDialog() {\n    customDialog.customDialog(htmlTemplate, EditFieldDialogController).subscribe();\n}\n\nfunction EditFieldDialogController(instance) {\n    let vm = instance;\n    let entityId = widgetContext.activeEntityInfo.entityId;\n    \n    vm.fieldName = widgetContext.activeEntityInfo.entityName || 'Field';\n    \n    vm.editPerimeterFormGroup = vm.fb.group({\n        entityName: ['', [vm.validators.required]],\n        entityLabel: [''],\n        attributes: vm.fb.group({\n            polygon_coordinates: ['', [vm.validators.required]],\n            area_hectares: [null],\n            cropType: [''],\n            soil_type: [''],\n            location: [''],\n            minMoistureThreshold: [null],\n            maxMoistureThreshold: [null],\n            notes: ['']\n        })\n    });\n    \n    // Load existing data\n    loadFieldData();\n    \n    function loadFieldData() {\n        widgetContext.rxjs.forkJoin([\n            assetService.getAsset(entityId.id),\n            attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE')\n        ]).subscribe(\n            function(results) {\n                let asset = results[0];\n                let attributes = results[1];\n                \n                // Populate basic info\n                vm.editPerimeterFormGroup.patchValue({\n                    entityName: asset.name,\n                    entityLabel: asset.label || ''\n                });\n                \n                // Populate attributes\n                let attrValues = {};\n                attributes.forEach(function(attr) {\n                    let value = attr.value;\n                    if (attr.key === 'polygon_coordinates' && typeof value !== 'string') {\n                        value = JSON.stringify(value);\n                    }\n                    attrValues[attr.key] = value;\n                });\n                \n                vm.editPerimeterFormGroup.get('attributes').patchValue(attrValues);\n                vm.editPerimeterFormGroup.markAsPristine();\n            }\n        );\n    }\n    \n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n    \n    vm.save = function() {\n        vm.editPerimeterFormGroup.markAsPristine();\n        \n        let formValues = vm.editPerimeterFormGroup.value;\n        let asset = {\n            id: entityId,\n            name: formValues.entityName,\n            label: formValues.entityLabel,\n            type: 'irrigation_perimeter'\n        };\n        \n        assetService.saveAsset(asset).subscribe(\n            function(savedAsset) {\n                saveAttributes(savedAsset.id).subscribe(\n                    function() {\n                        widgetContext.updateAliases();\n                        vm.dialogRef.close(null);\n                    }\n                );\n            }\n        );\n    };\n    \n    function saveAttributes(assetId) {\n        let attributes = vm.editPerimeterFormGroup.get('attributes').value;\n        let attributesArray = [];\n        \n        for (let key in attributes) {\n            if (attributes[key] !== null && attributes[key] !== '') {\n                let value = attributes[key];\n                if (key === 'polygon_coordinates' && typeof value === 'string') {\n                    try {\n                        JSON.parse(value);\n                    } catch (e) {\n                        console.error('Invalid polygon JSON:', e);\n                    }\n                }\n                attributesArray.push({key: key, value: value});\n            }\n        }\n        \n        if (attributesArray.length > 0) {\n            return attributeService.saveEntityAttributes(assetId, 'SERVER_SCOPE', attributesArray);\n        }\n        return widgetContext.rxjs.of([]);\n    }\n}",
                "customResources" : [ ]
              }, {
                "name" : "Delete field",
                "icon" : "delete",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "customPretty",
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "76de68f0-6177-7d13-0fb7-5af0f56b25dc",
                "customHtml" : "<div class=\"delete-field-dialog\">\n    <h2 mat-dialog-title>Delete Field?</h2>\n    <mat-dialog-content>\n        <div class=\"warning-section\">\n            <mat-icon class=\"warning-icon\">warning</mat-icon>\n            <div>\n                <p class=\"main-text\">Are you sure you want to delete <strong>{{fieldName}}</strong>?</p>\n                <p class=\"warning-text\">This action cannot be undone.</p>\n            </div>\n        </div>\n        \n        <div *ngIf=\"deviceCount > 0\" class=\"device-warning\">\n            <mat-icon>devices</mat-icon>\n            <span>This field has <strong>{{deviceCount}} connected device(s)</strong></span>\n        </div>\n        \n        <mat-checkbox [(ngModel)]=\"deleteRelations\" class=\"checkbox\">\n            Also delete all device relations\n        </mat-checkbox>\n    </mat-dialog-content>\n    <mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">\n        <button mat-button (click)=\"cancel()\">Cancel</button>\n        <button mat-button mat-raised-button color=\"warn\" (click)=\"confirm()\" [disabled]=\"isDeleting\">\n            <mat-icon *ngIf=\"isDeleting\">\n                <mat-spinner diameter=\"20\"></mat-spinner>\n            </mat-icon>\n            {{isDeleting ? 'Deleting...' : 'Delete Field'}}\n        </button>\n    </mat-dialog-actions>\n</div>",
                "customCss" : ".delete-field-dialog .warning-section {\n    display: flex;\n    align-items: flex-start;\n    gap: 16px;\n    padding: 16px;\n    background: #fff3e0;\n    border-radius: 8px;\n    margin-bottom: 16px;\n}\n\n.delete-field-dialog .warning-icon {\n    color: #f57c00;\n    font-size: 32px;\n    width: 32px;\n    height: 32px;\n}\n\n.delete-field-dialog .main-text {\n    margin: 0 0 8px 0;\n    font-size: 15px;\n}\n\n.delete-field-dialog .warning-text {\n    margin: 0;\n    color: #d32f2f;\n    font-weight: 500;\n    font-size: 13px;\n}\n\n.delete-field-dialog .device-warning {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    padding: 12px;\n    background: #e3f2fd;\n    border-radius: 4px;\n    margin-bottom: 16px;\n    color: #1976d2;\n}\n\n.delete-field-dialog .device-warning mat-icon {\n    color: #1976d2;\n}\n\n.delete-field-dialog .checkbox {\n    margin-top: 8px;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\nlet assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\n\nopenDeleteFieldDialog();\n\nfunction openDeleteFieldDialog() {\n    customDialog.customDialog(htmlTemplate, DeleteFieldDialogController).subscribe();\n}\n\nfunction DeleteFieldDialogController(instance) {\n    let vm = instance;\n    let entityId = widgetContext.activeEntityInfo.entityId;\n    \n    vm.fieldName = widgetContext.activeEntityInfo.entityName || 'this field';\n    vm.deviceCount = 0;\n    vm.deleteRelations = true;\n    vm.isDeleting = false;\n    \n    // Check for related devices\n    entityRelationService.findByFrom(entityId, 'COMMON').subscribe(\n        function(relations) {\n            vm.deviceCount = relations.filter(r => r.to.entityType === 'DEVICE').length;\n        }\n    );\n    \n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n    \n    vm.confirm = function() {\n        vm.isDeleting = true;\n        \n        if (vm.deleteRelations) {\n            // Delete relations first\n            entityRelationService.findByFrom(entityId, 'COMMON').subscribe(\n                function(relations) {\n                    let deleteRelTasks = relations.map(function(rel) {\n                        return entityRelationService.deleteRelation(\n                            rel.from,\n                            rel.type,\n                            rel.to,\n                            rel.typeGroup || 'COMMON'\n                        );\n                    });\n                    \n                    if (deleteRelTasks.length > 0) {\n                        widgetContext.rxjs.forkJoin(deleteRelTasks).subscribe(\n                            function() {\n                                deleteAsset();\n                            },\n                            function(error) {\n                                console.error('Error deleting relations:', error);\n                                vm.isDeleting = false;\n                            }\n                        );\n                    } else {\n                        deleteAsset();\n                    }\n                }\n            );\n        } else {\n            deleteAsset();\n        }\n    };\n    \n    function deleteAsset() {\n        assetService.deleteAsset(entityId.id).subscribe(\n            function() {\n                widgetContext.updateAliases();\n                vm.dialogRef.close(null);\n            },\n            function(error) {\n                console.error('Error deleting asset:', error);\n                vm.isDeleting = false;\n            }\n        );\n    }\n}",
                "customResources" : [ ]
              } ]
            },
            "showTitleIcon" : false,
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : { },
            "widgetCss" : "mat-row {\n    cursor: pointer;\n}",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "row" : 0,
          "col" : 0,
          "id" : "8ce15aad-9ab2-55ce-2628-a663814d27b1",
          "typeFullFqn" : "system.cards.entities_table"
        },
        "8fcd3aed-58d0-0cad-cf63-3a08e1be40a9" : {
          "type" : "latest",
          "sizeX" : 7.5,
          "sizeY" : 6.5,
          "config" : {
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1667907617961,
                  "endTimeMs" : 1667994017961
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "entitiesTitle" : "Devices",
              "enableSearch" : true,
              "enableSelectColumnDisplay" : true,
              "enableStickyHeader" : true,
              "enableStickyAction" : true,
              "reserveSpaceForHiddenAction" : "true",
              "displayEntityName" : false,
              "displayEntityLabel" : false,
              "displayEntityType" : false,
              "displayPagination" : true,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "name"
            },
            "title" : "Connected Devices",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400,
              "padding" : "5px 10px 5px 10px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "datasources" : [ {
              "type" : "entity",
              "entityAliasId" : "264356aa-f5f0-6605-d246-750736edf5c6",
              "dataKeys" : [ {
                "name" : "name",
                "type" : "entityField",
                "label" : "Device Name",
                "color" : "#2196f3",
                "settings" : {
                  "columnWidth" : "30%",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : false,
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled"
                },
                "_hash" : 0.123
              }, {
                "name" : "type",
                "type" : "entityField",
                "label" : "Type",
                "color" : "#4caf50",
                "settings" : {
                  "columnWidth" : "25%",
                  "useCellStyleFunction" : true,
                  "cellStyleFunction" : "return { fontWeight: 600 };",
                  "useCellContentFunction" : true,
                  "cellContentFunction" : "var typeMap = {\n    'SI Soil Moisture Sensor': '💧 Moisture',\n    'FertiRega LoRa Sensor': '📡 Controller'\n};\nvar displayType = typeMap[value] || value;\nreturn '<span style=\"background: rgba(111, 116, 242, 0.08); border-radius: 16px; padding: 4px 8px; color: #5553AF;\">' + displayType + '</span>';",
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled"
                },
                "_hash" : 0.456
              }, {
                "name" : "label",
                "type" : "entityField",
                "label" : "Label",
                "color" : "#f44336",
                "settings" : {
                  "columnWidth" : "20%",
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled"
                },
                "_hash" : 0.789
              }, {
                "name" : "active",
                "type" : "attribute",
                "label" : "Status",
                "color" : "#ffc107",
                "settings" : {
                  "columnWidth" : "15%",
                  "useCellContentFunction" : true,
                  "cellContentFunction" : "var isActive = value === true || value === 'true';\nvar color = isActive ? '#198038' : '#D12730';\nvar text = isActive ? 'Active' : 'Offline';\nreturn '<div><span style=\"width: 8px; height: 8px; border-radius: 4px; background: ' + color + '; display: inline-block; vertical-align: middle;\"></span><span style=\"padding-left: 8px; font-weight: 500;\">' + text + '</span></div>';",
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled"
                },
                "_hash" : 0.321
              }, {
                "name" : "lastActivityTime",
                "type" : "attribute",
                "label" : "Last Activity",
                "color" : "#607d8b",
                "settings" : {
                  "columnWidth" : "10%",
                  "useCellContentFunction" : true,
                  "cellContentFunction" : "if (!value) return 'Never';\nvar elapsed = Date.now() - value;\nvar minutes = Math.floor(elapsed / 60000);\nvar hours = Math.floor(minutes / 60);\nvar days = Math.floor(hours / 24);\nif (days > 0) return days + 'd ago';\nif (hours > 0) return hours + 'h ago';\nif (minutes > 0) return minutes + 'm ago';\nreturn 'Just now';",
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled"
                },
                "_hash" : 0.654
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              }
            } ],
            "displayTimewindow" : true,
            "showTitleIcon" : false,
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetStyle" : { },
            "widgetCss" : ".mat-mdc-header-row {\n    display: none;\n}\n\n.mat-mdc-row, .mat-mdc-cell {\n    border-bottom: none;\n    cursor: pointer;\n}\n\n.mdc-data-table__row:last-child .mdc-data-table__cell {\n    border-bottom: none;\n}\n",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "actions" : {
              "headerButton" : [ {
                "name" : "Add Device to Field",
                "icon" : "add",
                "type" : "customPretty",
                "customHtml" : "<form #addDeviceForm=\"ngForm\" [formGroup]=\"addDeviceFormGroup\" (ngSubmit)=\"save()\" class=\"add-device-form\">\n    <mat-toolbar fxLayout=\"row\" color=\"primary\">\n        <h2>Add Device to Field</h2>\n        <span fxFlex></span>\n        <button mat-icon-button (click)=\"cancel()\" type=\"button\">\n            <mat-icon class=\"material-icons\">close</mat-icon>\n        </button>\n    </mat-toolbar>\n    <mat-progress-bar color=\"warn\" mode=\"indeterminate\" *ngIf=\"isLoading$ | async\"></mat-progress-bar>\n    <div style=\"height: 4px;\" *ngIf=\"!(isLoading$ | async)\"></div>\n    \n    <div mat-dialog-content fxLayout=\"column\">\n        <div class=\"section-title\">Select Device</div>\n        \n        <div fxLayout=\"row\" fxLayout.xs=\"column\">\n            <tb-entity-select\n                fxFlex class=\"mat-block\"\n                formControlName=\"device\"\n                [required]=\"true\">\n            </tb-entity-select>\n        </div>\n        \n        <div class=\"helper-text\">\n            Select a device to link to this field via \"Contains\" relation.\n        </div>\n    </div>\n    \n    <div mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">\n        <button mat-button color=\"primary\" type=\"button\" [disabled]=\"(isLoading$ | async)\" (click)=\"cancel()\">\n            Cancel\n        </button>\n        <button mat-button mat-raised-button color=\"primary\" type=\"submit\" \n                [disabled]=\"(isLoading$ | async) || addDeviceForm.invalid || !addDeviceForm.dirty\">\n            Add Device\n        </button>\n    </div>\n</form>",
                "customCss" : ".add-device-form .section-title {\n    color: rgba(0,0,0,0.87);\n    font-size: 14px;\n    font-weight: 500;\n    margin-top: 8px;\n    margin-bottom: 8px;\n}\n\n.add-device-form .helper-text {\n    color: rgba(0,0,0,0.54);\n    font-size: 12px;\n    margin-top: 8px;\n    margin-bottom: 16px;\n}\n\n.add-device-form .mat-form-field {\n    width: 100%;\n}\n\n.add-device-form .mat-form-field-infix {\n    width: auto !important;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\n\nopenAddDeviceDialog();\n\nfunction openAddDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, AddDeviceDialogController).subscribe();\n}\n\nfunction AddDeviceDialogController(instance) {\n    let vm = instance;\n    \n    vm.addDeviceFormGroup = vm.fb.group({\n        device: [null, [vm.validators.required]]\n    });\n    \n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n    \n    vm.save = function() {\n        vm.addDeviceFormGroup.markAsPristine();\n        \n        let deviceId = vm.addDeviceFormGroup.get('device').value;\n        let fieldParam = widgetContext.stateController.getStateParams().field;\n        \n        if (!fieldParam) {\n            console.error('No field parameter in state');\n            return;\n        }\n        \n        // Parse and extract the correct field entity ID\n        let fieldEntityId;\n        try {\n            let parsed = fieldParam;\n            if (typeof fieldParam === 'string') {\n                parsed = JSON.parse(fieldParam);\n            }\n            \n            // Check if entityId is nested (from state parameter)\n            if (parsed.entityId) {\n                fieldEntityId = parsed.entityId;\n            } else {\n                fieldEntityId = parsed;\n            }\n            \n            console.log('Extracted field ID:', fieldEntityId);\n        } catch (e) {\n            console.error('Error parsing field ID:', e);\n            return;\n        }\n        \n        // Ensure both IDs have correct format\n        if (!fieldEntityId.entityType || !fieldEntityId.id) {\n            console.error('Invalid field entity ID format:', fieldEntityId);\n            return;\n        }\n        \n        if (!deviceId.entityType || !deviceId.id) {\n            console.error('Invalid device entity ID format:', deviceId);\n            return;\n        }\n        \n        let relation = {\n            from: fieldEntityId,\n            to: deviceId,\n            type: 'Contains',\n            typeGroup: 'COMMON'\n        };\n        \n        console.log('Creating relation:', relation);\n        \n        entityRelationService.saveRelation(relation).subscribe(\n            function(result) {\n                console.log('✅ Relation created successfully!');\n                widgetContext.updateAliases();\n                vm.dialogRef.close(null);\n            },\n            function(error) {\n                console.error('❌ Error creating relation:', error);\n            }\n        );\n    };\n}",
                "customResources" : [ ],
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "add-device-action"
              } ],
              "actionCellButton" : [ {
                "name" : "Remove from Field",
                "icon" : "delete",
                "type" : "customPretty",
                "customHtml" : "<div class=\"remove-device-dialog\">\n    <h2 mat-dialog-title>Remove Device from Field?</h2>\n    <mat-dialog-content>\n        <p>Are you sure you want to remove <strong>{{entityName}}</strong> from this field?</p>\n        <p class=\"warning-text\">This will delete the \"Contains\" relation between the field and this device.</p>\n    </mat-dialog-content>\n    <mat-dialog-actions fxLayout=\"row\" fxLayoutAlign=\"end center\">\n        <button mat-button (click)=\"cancel()\">Cancel</button>\n        <button mat-button mat-raised-button color=\"warn\" (click)=\"confirm()\">Remove Device</button>\n    </mat-dialog-actions>\n</div>",
                "customCss" : ".remove-device-dialog .warning-text {\n    color: #D12730;\n    font-size: 13px;\n    margin-top: 8px;\n}",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\nlet entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\n\n// Get device ID from additional params (passed by action cell button)\nlet deviceEntityId = additionalParams?.entityId || additionalParams?.entity?.id;\nlet deviceName = additionalParams?.entityName || additionalParams?.entity?.name || 'this device';\n\nopenRemoveDeviceDialog();\n\nfunction openRemoveDeviceDialog() {\n    customDialog.customDialog(htmlTemplate, RemoveDeviceDialogController).subscribe();\n}\n\nfunction RemoveDeviceDialogController(instance) {\n    let vm = instance;\n    \n    vm.entityName = deviceName;\n    \n    vm.cancel = function() {\n        vm.dialogRef.close(null);\n    };\n    \n    vm.confirm = function() {\n        let fieldParam = widgetContext.stateController.getStateParams().field;\n        \n        if (!fieldParam || !deviceEntityId) {\n            console.error('Missing field or device ID');\n            return;\n        }\n        \n        // Parse field ID\n        let fieldEntityId;\n        try {\n            let parsed = fieldParam;\n            if (typeof fieldParam === 'string') {\n                parsed = JSON.parse(fieldParam);\n            }\n            \n            if (parsed.entityId) {\n                fieldEntityId = parsed.entityId;\n            } else {\n                fieldEntityId = parsed;\n            }\n        } catch (e) {\n            console.error('Error parsing field ID:', e);\n            return;\n        }\n        \n        console.log('Deleting relation FROM:', fieldEntityId, 'TO:', deviceEntityId);\n        \n        entityRelationService.deleteRelation(\n            fieldEntityId,\n            'Contains',\n            deviceEntityId,\n            'COMMON'\n        ).subscribe(\n            function(result) {\n                console.log('✅ Device removed successfully!');\n                widgetContext.updateAliases();\n                vm.dialogRef.close(null);\n            },\n            function(error) {\n                console.error('❌ Error removing device:', error);\n            }\n        );\n    };\n}",
                "customResources" : [ ],
                "openInSeparateDialog" : false,
                "openInPopover" : false,
                "id" : "remove-device-action"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "8fcd3aed-58d0-0cad-cf63-3a08e1be40a9",
          "typeFullFqn" : "system.cards.entities_table"
        },
        "7cfc3255-f459-6eb9-000e-70fef5afbcdb" : {
          "type" : "latest",
          "sizeX" : 8.5,
          "sizeY" : 6,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "39927380-423a-872a-0843-de34f99264ad",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "name",
                "type" : "entityField",
                "label" : "Name",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.848379539472371
              }, {
                "name" : "polygon_coordinates",
                "type" : "attribute",
                "label" : "polygon_coordinates",
                "color" : "#ffc107",
                "settings" : { },
                "_hash" : 0.7803202333041441
              } ]
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1667907617961,
                  "endTimeMs" : 1667994017961
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "#fff",
            "color" : "rgba(0,0,0,0.87)",
            "padding" : "0px",
            "settings" : {
              "provider" : "openstreet-map",
              "gmApiKey" : "AIzaSyDoEx2kaGz3PxwbI9T7ccTSg5xjdw8Nw8Q",
              "gmDefaultMapType" : "roadmap",
              "mapProvider" : "OpenStreetMap.HOT",
              "useCustomProvider" : false,
              "customProviderTileUrl" : "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
              "mapProviderHere" : "HERE.normalDay",
              "credentials" : {
                "app_id" : "AhM6TzD9ThyK78CT3ptx",
                "app_code" : "p6NPiITB3Vv0GMUFnkLOOg"
              },
              "mapImageUrl" : "tb-image;/api/images/system/here_map_system_widget_map_image.svg",
              "tmApiKey" : "84d6d83e0e51e481e50454ccbe8986b",
              "tmDefaultMapType" : "roadmap",
              "latKeyName" : "1",
              "lngKeyName" : "1",
              "defaultZoomLevel" : 14,
              "defaultCenterPosition" : "49.348472, 32.108611",
              "disableScrollZooming" : false,
              "disableDoubleClickZooming" : false,
              "disableZoomControl" : false,
              "fitMapBounds" : true,
              "useDefaultCenterPosition" : false,
              "mapPageSize" : 16384,
              "markerOffsetX" : 0.5,
              "markerOffsetY" : 1,
              "posFunction" : "return {x: origXPos, y: origYPos};",
              "draggableMarker" : false,
              "showLabel" : false,
              "useLabelFunction" : false,
              "label" : "${entityName}",
              "showTooltip" : true,
              "showTooltipAction" : "click",
              "autocloseTooltip" : true,
              "useTooltipFunction" : false,
              "tooltipPattern" : "<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}<br/><b>Temperature:</b> ${temperature} °C<br/><small>See advanced settings for details</small>",
              "tooltipOffsetX" : 0,
              "tooltipOffsetY" : -1,
              "color" : "#fe7569",
              "useColorFunction" : false,
              "useMarkerImageFunction" : false,
              "markerImageSize" : 34,
              "markerImages" : [ ],
              "showPolygon" : true,
              "polygonKeyName" : "polygon_coordinates",
              "editablePolygon" : true,
              "showPolygonLabel" : false,
              "usePolygonLabelFunction" : false,
              "polygonLabel" : "${entityName}",
              "showPolygonTooltip" : false,
              "showPolygonTooltipAction" : "click",
              "autoClosePolygonTooltip" : true,
              "usePolygonTooltipFunction" : false,
              "polygonTooltipPattern" : "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
              "polygonColor" : "#3388ff",
              "polygonOpacity" : 0.2,
              "usePolygonColorFunction" : false,
              "polygonStrokeColor" : "#3388ff",
              "polygonStrokeOpacity" : 1,
              "polygonStrokeWeight" : 3,
              "usePolygonStrokeColorFunction" : false,
              "showCircle" : false,
              "circleKeyName" : "perimeter",
              "editableCircle" : false,
              "showCircleLabel" : false,
              "useCircleLabelFunction" : false,
              "circleLabel" : "${entityName}",
              "showCircleTooltip" : false,
              "showCircleTooltipAction" : "click",
              "autoCloseCircleTooltip" : true,
              "useCircleTooltipFunction" : false,
              "circleTooltipPattern" : "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
              "circleFillColor" : "#3388ff",
              "circleFillColorOpacity" : 0.2,
              "useCircleFillColorFunction" : false,
              "circleStrokeColor" : "#3388ff",
              "circleStrokeOpacity" : 1,
              "circleStrokeWeight" : 3,
              "useCircleStrokeColorFunction" : false,
              "snappable" : false,
              "initDragMode" : true,
              "hideAllControlButton" : false,
              "hideDrawControlButton" : false,
              "hideEditControlButton" : false,
              "hideRemoveControlButton" : false,
              "useClusterMarkers" : false,
              "zoomOnClick" : true,
              "maxClusterRadius" : 80,
              "animate" : true,
              "spiderfyOnMaxZoom" : false,
              "showCoverageOnHover" : true,
              "chunkedLoading" : false,
              "removeOutsideVisibleBounds" : true,
              "useIconCreateFunction" : false
            },
            "title" : "Fields",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "widgetStyle" : { },
            "actions" : {
              "markerClick" : [ ]
            },
            "showTitleIcon" : false,
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "row" : 0,
          "col" : 0,
          "id" : "7cfc3255-f459-6eb9-000e-70fef5afbcdb",
          "typeFullFqn" : "system.maps_v2.openstreetmap"
        },
        "1503181d-ed67-4878-b497-f3809bf73675" : {
          "type" : "latest",
          "sizeX" : 8.5,
          "sizeY" : 6,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "7473a7a0-136a-63da-f2ca-f249a1336745",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "name",
                "type" : "entityField",
                "label" : "Name",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.848379539472371
              }, {
                "name" : "polygon_coordinates",
                "type" : "attribute",
                "label" : "polygon_coordinates",
                "color" : "#ffc107",
                "settings" : { },
                "_hash" : 0.7803202333041441
              }, {
                "name" : "type",
                "type" : "entityField",
                "label" : "type",
                "color" : "#607d8b",
                "settings" : { },
                "_hash" : 0.683554616539082,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ]
            }, {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "61ca5437-6539-88f4-4f59-a9508eefdf1e",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "latitude",
                "type" : "attribute",
                "label" : "latitude",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.5728081182215903
              }, {
                "name" : "longitude",
                "type" : "attribute",
                "label" : "longitude",
                "color" : "#ffc107",
                "settings" : { },
                "_hash" : 0.3622534354244682
              }, {
                "name" : "type",
                "type" : "entityField",
                "label" : "type",
                "color" : "#9c27b0",
                "settings" : { },
                "_hash" : 0.6996122480848663,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "moisture",
                "type" : "timeseries",
                "label" : "moisture",
                "color" : "#8bc34a",
                "settings" : { },
                "_hash" : 0.068068867797354
              } ]
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1668004676539,
                  "endTimeMs" : 1668091076539
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "#fff",
            "color" : "rgba(0,0,0,0.87)",
            "padding" : "0px",
            "settings" : {
              "provider" : "openstreet-map",
              "gmApiKey" : "AIzaSyDoEx2kaGz3PxwbI9T7ccTSg5xjdw8Nw8Q",
              "gmDefaultMapType" : "roadmap",
              "mapProvider" : "Esri.WorldImagery",
              "useCustomProvider" : false,
              "customProviderTileUrl" : "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
              "mapProviderHere" : "HERE.normalDay",
              "credentials" : {
                "app_id" : "AhM6TzD9ThyK78CT3ptx",
                "app_code" : "p6NPiITB3Vv0GMUFnkLOOg"
              },
              "mapImageUrl" : "tb-image;/api/images/system/here_map_system_widget_map_image.svg",
              "tmApiKey" : "84d6d83e0e51e481e50454ccbe8986b",
              "tmDefaultMapType" : "roadmap",
              "latKeyName" : "latitude",
              "lngKeyName" : "longitude",
              "xPosKeyName" : "xPos",
              "yPosKeyName" : "yPos",
              "defaultZoomLevel" : 15,
              "defaultCenterPosition" : "49.348472, 32.108611",
              "disableScrollZooming" : false,
              "disableDoubleClickZooming" : false,
              "disableZoomControl" : false,
              "fitMapBounds" : true,
              "useDefaultCenterPosition" : false,
              "mapPageSize" : 16384,
              "markerOffsetX" : 0.5,
              "markerOffsetY" : 1,
              "draggableMarker" : true,
              "showLabel" : false,
              "showTooltip" : false,
              "color" : "#fe7569",
              "useColorFunction" : false,
              "useMarkerImageFunction" : true,
              "markerImageFunction" : "var type = data['type'];\nif (type === 'SI Soil Moisture Sensor') {\n    var text = getSensorText();\n    var defaultMarkerWidth = 20;\n    var width = defaultMarkerWidth + getTextWidth(text);\n    var svgStr = getSensorSvg(width, text);\n    var encodedSvg = encodeURIComponent(svgStr);\n    var svgUrl = 'data:image/svg+xml,' + encodedSvg;\n    return {\n        url: svgUrl,\n        size: width,\n        markerOffset: [defaultMarkerWidth / 2, defaultMarkerWidth / 2],\n        tooltipOffset: [width * 0.5 - defaultMarkerWidth / 2, - (defaultMarkerWidth / 2)]\n    };\n} else {\n    return null;\n}\n\nfunction getSensorSvg(width, text) {\n    var color = '#FFFFFF';\n    var background = getSensorBackground(color, width);\n    var svgWidth = width;\n    var svgHeight = 20;\n    var opacity = 1;\n    var sensorSvg = '<svg opacity=\"' + opacity + '\" width=\"' + svgWidth + '\" height=\"' + svgHeight + '\" viewBox=\"0 0 ' + svgWidth + ' ' + svgHeight + '\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">' +\n                    background;\n    if (text !== '') {\n        var transform = '8 0';\n        sensorSvg += '<text transform=\"translate(' + transform + ')\" fill=\"black\" xml:space=\"preserve\" style=\"white-space: pre\" font-family=\"Roboto\" font-size=\"12\" font-weight=\"600\" letter-spacing=\"0em\"><tspan x=\"0.10664\" y=\"14.2637\">' + text + '</tspan></text>';\n    }\n    sensorSvg += '</svg>';\n    return sensorSvg;    \n}\n\nfunction getSensorBackground(color, width) {\n     if (width === 20) {\n         return '<circle cx=\"10\" cy=\"10\" r=\"10\" fill=\"'+ color +'\"/>';\n     } else {\n         return '<circle cx=\"10\" cy=\"10\" r=\"10\" fill=\"'+ color +'\"/>' + \n                '<circle cx=\"' + (width - 35) + '\" cy=\"10\" r=\"10\" fill=\"'+ color +'\"/>' +\n                '<rect x=\"10\" y=\"0\" width=\"' + (width - 45) + '\" height=\"20\" rx=\"1\" fill=\"'+ color +'\"/>';\n     }\n}\n\nfunction getSensorText() {\n    if (data['moisture']) {\n        var moisture = Number(data['moisture']);\n        return moisture + '%';\n    } else {\n        return '';\n    }\n}\n\nfunction getTextWidth(text) {\n    var width = 0;\n    for (var i = 0; i < text.length; i++) {\n        var charWidth;\n        var character = text.charAt(i);\n        if (character === ' ') {\n            charWidth = 8;\n        } else if (character === '-') {\n            charWidth = 7;\n        } else if (character === '°') {\n            charWidth = 5;\n        } else if (!isNaN(character * 1)){\n            charWidth = 9;\n        } else {\n            // Upper case\n            if (character === character.toUpperCase()) {\n                charWidth = 12;\n            // Lower case    \n            } else {\n                charWidth = 10;\n            }\n        }\n        width += charWidth;\n    }\n    return width;\n}",
              "markerImages" : [ ],
              "showPolygon" : true,
              "polygonKeyName" : "polygon_coordinates",
              "editablePolygon" : false,
              "showPolygonLabel" : false,
              "usePolygonLabelFunction" : false,
              "polygonLabel" : "${entityName}",
              "showPolygonTooltip" : false,
              "showPolygonTooltipAction" : "click",
              "autoClosePolygonTooltip" : true,
              "usePolygonTooltipFunction" : false,
              "polygonTooltipPattern" : "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
              "polygonColor" : "#3388ff",
              "polygonOpacity" : 0.2,
              "usePolygonColorFunction" : false,
              "polygonStrokeColor" : "#3388ff",
              "polygonStrokeOpacity" : 1,
              "polygonStrokeWeight" : 3,
              "usePolygonStrokeColorFunction" : false,
              "showCircle" : false,
              "circleKeyName" : "perimeter",
              "editableCircle" : false,
              "showCircleLabel" : false,
              "useCircleLabelFunction" : false,
              "circleLabel" : "${entityName}",
              "showCircleTooltip" : false,
              "showCircleTooltipAction" : "click",
              "autoCloseCircleTooltip" : true,
              "useCircleTooltipFunction" : false,
              "circleTooltipPattern" : "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
              "circleFillColor" : "#3388ff",
              "circleFillColorOpacity" : 0.2,
              "useCircleFillColorFunction" : false,
              "circleStrokeColor" : "#3388ff",
              "circleStrokeOpacity" : 1,
              "circleStrokeWeight" : 3,
              "useCircleStrokeColorFunction" : false,
              "snappable" : false,
              "initDragMode" : true,
              "hideAllControlButton" : false,
              "hideDrawControlButton" : false,
              "hideEditControlButton" : false,
              "hideRemoveControlButton" : true,
              "useClusterMarkers" : false,
              "zoomOnClick" : true,
              "maxClusterRadius" : 80,
              "animate" : true,
              "spiderfyOnMaxZoom" : false,
              "showCoverageOnHover" : true,
              "chunkedLoading" : false,
              "removeOutsideVisibleBounds" : true
            },
            "title" : "Fields",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "widgetStyle" : { },
            "actions" : {
              "markerClick" : [ ]
            },
            "showTitleIcon" : false,
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "row" : 0,
          "col" : 0,
          "id" : "1503181d-ed67-4878-b497-f3809bf73675",
          "typeFullFqn" : "system.maps_v2.openstreetmap"
        },
        "8345be8d-e581-cbf5-3b22-a95bc191063f" : {
          "type" : "latest",
          "sizeX" : 8.5,
          "sizeY" : 6,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "entityAliasId" : "39927380-423a-872a-0843-de34f99264ad",
              "dataKeys" : [ {
                "name" : "polygon_coordinates",
                "type" : "attribute",
                "label" : "polygon_coordinates",
                "color" : "#e91e63",
                "settings" : { },
                "_hash" : 0.3077967753809576
              }, {
                "name" : "cropType",
                "type" : "attribute",
                "label" : "cropType",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.5684510263766591
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              }
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1668004676539,
                  "endTimeMs" : 1668091076539
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "#fff",
            "color" : "rgba(0,0,0,0.87)",
            "padding" : "0px",
            "settings" : {
              "provider" : "openstreet-map",
              "gmApiKey" : "AIzaSyDoEx2kaGz3PxwbI9T7ccTSg5xjdw8Nw8Q",
              "gmDefaultMapType" : "roadmap",
              "mapProvider" : "Esri.WorldImagery",
              "useCustomProvider" : false,
              "customProviderTileUrl" : "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
              "mapProviderHere" : "HERE.normalDay",
              "credentials" : {
                "useV3" : true,
                "app_id" : "AhM6TzD9ThyK78CT3ptx",
                "app_code" : "p6NPiITB3Vv0GMUFnkLOOg",
                "apiKey" : "kVXykxAfZ6LS4EbCTO02soFVfjA7HoBzNVVH9u7nzoE"
              },
              "mapImageUrl" : "tb-image;/api/images/system/here_map_system_widget_map_image.svg",
              "imageEntityAlias" : "",
              "imageUrlAttribute" : "",
              "tmApiKey" : "84d6d83e0e51e481e50454ccbe8986b",
              "tmDefaultMapType" : "roadmap",
              "latKeyName" : "latitude",
              "lngKeyName" : "longitude",
              "xPosKeyName" : "xPos",
              "yPosKeyName" : "yPos",
              "defaultZoomLevel" : 15,
              "defaultCenterPosition" : "49.348472, 32.108611",
              "disableScrollZooming" : false,
              "disableDoubleClickZooming" : false,
              "disableZoomControl" : false,
              "fitMapBounds" : true,
              "useDefaultCenterPosition" : false,
              "mapPageSize" : 16384,
              "markerOffsetX" : 0.5,
              "markerOffsetY" : 1,
              "draggableMarker" : false,
              "showLabel" : true,
              "useLabelFunction" : false,
              "label" : "${entityName}",
              "showTooltip" : true,
              "showTooltipAction" : "click",
              "autocloseTooltip" : true,
              "useTooltipFunction" : false,
              "tooltipPattern" : "<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}",
              "tooltipOffsetX" : 0,
              "tooltipOffsetY" : -1,
              "color" : "#fe7569",
              "useColorFunction" : false,
              "useMarkerImageFunction" : true,
              "markerImageFunction" : "var type = data['type'];\nif (type === 'SI Soil Moisture Sensor') {\n    var text = getSensorText();\n    var defaultMarkerWidth = 20;\n    var width = defaultMarkerWidth + getTextWidth(text);\n    var svgStr = getSensorSvg(width, text);\n    var encodedSvg = encodeURIComponent(svgStr);\n    var svgUrl = 'data:image/svg+xml,' + encodedSvg;\n    return {\n        url: svgUrl,\n        size: width,\n        markerOffset: [defaultMarkerWidth / 2, defaultMarkerWidth / 2],\n        tooltipOffset: [width * 0.5 - defaultMarkerWidth / 2, - (defaultMarkerWidth / 2)]\n    };\n} else {\n    return null;\n}\n\nfunction getSensorSvg(width, text) {\n    var moisture = data['moisture'];\n    var minMoistureThreshold = data['minMoistureThreshold'];\n    var maxMoistureThreshold = data['maxMoistureThreshold'];\n    var color = '#FFFFFF';\n    var textColor = '#000000';\n    if (typeof moisture === 'number' && (moisture < minMoistureThreshold || moisture > maxMoistureThreshold)) {\n        color = '#D12730';\n        textColor = '#FFFFFF';\n    }\n    var background = getSensorBackground(color, width);\n    var svgWidth = width;\n    var svgHeight = 20;\n    var opacity = 1;\n    var sensorSvg = '<svg opacity=\"' + opacity + '\" width=\"' + svgWidth + '\" height=\"' + svgHeight + '\" viewBox=\"0 0 ' + svgWidth + ' ' + svgHeight + '\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">' +\n                    background;\n    if (text !== '') {\n        var transform = '8 0';\n        sensorSvg += '<text transform=\"translate(' + transform + ')\" fill=\"'+textColor+'\" xml:space=\"preserve\" style=\"white-space: pre\" font-family=\"Roboto\" font-size=\"12\" font-weight=\"600\" letter-spacing=\"0em\"><tspan x=\"0.10664\" y=\"14.2637\">' + text + '</tspan></text>';\n    }\n    sensorSvg += '</svg>';\n    return sensorSvg;    \n}\n\nfunction getSensorBackground(color, width) {\n     if (width === 20) {\n         return '<circle cx=\"10\" cy=\"10\" r=\"10\" fill=\"'+ color +'\"/>';\n     } else {\n         return '<circle cx=\"10\" cy=\"10\" r=\"10\" fill=\"'+ color +'\"/>' + \n                '<circle cx=\"' + (width - 35) + '\" cy=\"10\" r=\"10\" fill=\"'+ color +'\"/>' +\n                '<rect x=\"10\" y=\"0\" width=\"' + (width - 45) + '\" height=\"20\" rx=\"1\" fill=\"'+ color +'\"/>';\n     }\n}\n\nfunction getSensorText() {\n    if (data['moisture']) {\n        var moisture = Number(data['moisture']).toFixed(1);\n        return moisture + '%';\n    } else {\n        return '';\n    }\n}\n\nfunction getTextWidth(text) {\n    var width = 0;\n    for (var i = 0; i < text.length; i++) {\n        var charWidth;\n        var character = text.charAt(i);\n        if (character === ' ') {\n            charWidth = 8;\n        } else if (character === '-') {\n            charWidth = 7;\n        } else if (character === '°') {\n            charWidth = 5;\n        } else if (!isNaN(character * 1)){\n            charWidth = 9;\n        } else {\n            // Upper case\n            if (character === character.toUpperCase()) {\n                charWidth = 12;\n            // Lower case    \n            } else {\n                charWidth = 10;\n            }\n        }\n        width += charWidth;\n    }\n    return width;\n}",
              "markerImages" : [ ],
              "showPolygon" : true,
              "polygonKeyName" : "polygon_coordinates",
              "editablePolygon" : false,
              "showPolygonLabel" : false,
              "usePolygonLabelFunction" : false,
              "polygonLabel" : "${entityName}",
              "polygonLabelFunction" : null,
              "showPolygonTooltip" : false,
              "showPolygonTooltipAction" : "click",
              "autoClosePolygonTooltip" : true,
              "usePolygonTooltipFunction" : false,
              "polygonTooltipPattern" : "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
              "polygonTooltipFunction" : null,
              "polygonColor" : "#3388ff",
              "polygonOpacity" : 0.2,
              "usePolygonColorFunction" : false,
              "polygonColorFunction" : null,
              "polygonStrokeColor" : "#3388ff",
              "polygonStrokeOpacity" : 1,
              "polygonStrokeWeight" : 3,
              "usePolygonStrokeColorFunction" : false,
              "polygonStrokeColorFunction" : null,
              "showCircle" : false,
              "circleKeyName" : "perimeter",
              "editableCircle" : false,
              "showCircleLabel" : false,
              "useCircleLabelFunction" : false,
              "circleLabel" : "${entityName}",
              "circleLabelFunction" : null,
              "showCircleTooltip" : false,
              "showCircleTooltipAction" : "click",
              "autoCloseCircleTooltip" : true,
              "useCircleTooltipFunction" : false,
              "circleTooltipPattern" : "<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}",
              "circleTooltipFunction" : null,
              "circleFillColor" : "#3388ff",
              "circleFillColorOpacity" : 0.2,
              "useCircleFillColorFunction" : false,
              "circleFillColorFunction" : null,
              "circleStrokeColor" : "#3388ff",
              "circleStrokeOpacity" : 1,
              "circleStrokeWeight" : 3,
              "useCircleStrokeColorFunction" : false,
              "circleStrokeColorFunction" : null,
              "useClusterMarkers" : false,
              "zoomOnClick" : true,
              "maxZoom" : null,
              "maxClusterRadius" : 80,
              "animate" : true,
              "spiderfyOnMaxZoom" : false,
              "showCoverageOnHover" : true,
              "chunkedLoading" : false,
              "removeOutsideVisibleBounds" : true,
              "useIconCreateFunction" : false,
              "clusterMarkerFunction" : null
            },
            "title" : "Fields",
            "dropShadow" : false,
            "enableFullscreen" : true,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "useDashboardTimewindow" : true,
            "showLegend" : false,
            "widgetStyle" : { },
            "actions" : {
              "markerClick" : [ {
                "name" : "Moisture sensor details",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "moisture_sensor_details",
                "setEntityId" : true,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "popoverPreferredPlacement" : "top",
                "popoverHideOnClickOutside" : true,
                "popoverHideDashboardToolbar" : true,
                "popoverWidth" : "300px",
                "popoverHeight" : "250px",
                "popoverStyle" : { },
                "openInSeparateDialog" : false,
                "openInPopover" : true,
                "id" : "f551c47e-12d1-7041-264a-ca98839c2f41"
              } ]
            },
            "showTitleIcon" : false,
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "displayTimewindow" : true
          },
          "row" : 0,
          "col" : 0,
          "id" : "8345be8d-e581-cbf5-3b22-a95bc191063f",
          "typeFullFqn" : "system.maps_v2.openstreetmap"
        },
        "1f66e5cb-041d-1a45-1abf-6f6ae3d91872" : {
          "type" : "latest",
          "sizeX" : 5,
          "sizeY" : 3.5,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "61ca5437-6539-88f4-4f59-a9508eefdf1e",
              "filterId" : null,
              "dataKeys" : [ ]
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1668004676539,
                  "endTimeMs" : 1668091076539
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "useMarkdownTextFunction" : false,
              "markdownTextPattern" : "<div class=\"main-layout\" style=\"width: 100%;\" fxLayout=\"column\">\n    <tb-dashboard-state \n        style=\"height: 160px; width: 100%;\"\n        [ctx]=\"ctx\"\n        stateId=\"moisture_sensor_details_brief\"\n        [entityId]=\"{ entityType: 'DEVICE', id: '${entityId}' }\"> \n    </tb-dashboard-state>\n    <mat-expansion-panel id=\"${entityId}\" class=\"tb-settings\" \n         (expandedChange)=\"showDetails = $event; ctx.popoverComponent?.resize($event ? '400px' : '300px', $event ? '570px' : '250px', 200)\">\n        <mat-expansion-panel-header fxLayout=\"row wrap\">\n            <mat-panel-description fxLayoutAlign=\"end center\">\n                View details\n            </mat-panel-description>\n        </mat-expansion-panel-header>\n        <ng-template matExpansionPanelContent>\n            <div style=\"height: 80px; width: 100%;\">\n                <tb-dashboard-state \n                    *ngIf=\"showDetails\"\n                    style=\"height: 100%; width: 100%;\"\n                    [ctx]=\"ctx\"\n                    stateId=\"moisture_sensor_details_alarms\"\n                    [entityId]=\"{ entityType: 'DEVICE', id: '${entityId}' }\">\n                </tb-dashboard-state>\n            </div>\n            <div style=\"height: 200px; width: 100%;\">\n                <tb-dashboard-state \n                    *ngIf=\"showDetails\"\n                    style=\"height: 100%; width: 100%;\"\n                    [ctx]=\"ctx\"\n                    stateId=\"moisture_sensor_details_moisture\"\n                    [entityId]=\"{ entityType: 'DEVICE', id: '${entityId}' }\">\n                </tb-dashboard-state>\n            </div>\n        </ng-template>\n    </mat-expansion-panel>\n</div>",
              "applyDefaultMarkdownStyle" : true,
              "markdownCss" : ".tb-markdown-view .tb-progress-cover, .tb-markdown-view .mat-drawer-container {\n    background-color: #fff !important;\n}\n\n.tb-markdown-view {\n    overflow: hidden !important;\n}\n\n.tb-markdown-view > div {\n    padding: 0;\n}\n"
            },
            "title" : "New Markdown/HTML Card",
            "showTitleIcon" : false,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "widgetStyle" : { },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "showLegend" : false,
            "useDashboardTimewindow" : true,
            "enableDataExport" : false,
            "widgetCss" : ".tb-widget-container > .tb-widget {\n    border-radius: 0px;\n    box-shadow: none;\n}\n\n.tb-markdown-view .tb-progress-cover, .tb-markdown-view .mat-drawer-container {\n    background-color: #fff !important;\n}\n\n.mat-expansion-panel.tb-settings {\n    box-shadow: none;\n}\n\n.mat-expansion-panel.tb-settings .mat-content {\n    overflow: visible;\n}\n\n.mat-expansion-panel.tb-settings .mat-expansion-panel-header {\n    padding: 0;\n}\n\n.mat-expansion-panel.tb-settings .mat-expansion-panel-header:hover {\n    background: none;\n}\n\n.mat-expansion-panel.tb-settings .mat-expansion-panel-header .mat-expansion-indicator {\n    padding: 2px;\n}\n\n.mat-expansion-panel.tb-settings .mat-expansion-panel-header-description {\n    align-items: center;\n    font-weight: 600;\n    font-size: 13px;\n    margin-right: 8px;\n}\n\n.mat-expansion-panel.tb-settings .mat-expansion-panel-header .mat-expansion-indicator:after, .mat-expansion-panel.tb-settings .mat-expansion-panel-header-description {\n    color: #5553AF;\n}\n\n.mat-expansion-panel.tb-settings .mat-expansion-panel-header .mat-expansion-indicator {\n    padding: 0 2px;\n    font-size: 13px;\n}\n\n.mat-expansion-panel.tb-settings .mat-expansion-panel-header .mat-expansion-indicator:after {\n    vertical-align: baseline;\n}\n\n.mat-expansion-panel.tb-settings > .mat-expansion-panel-content > .mat-expansion-panel-body {\n    padding: 0;\n}\n\n.mat-expansion-panel .mat-expansion-panel-content { \n    font: inherit;\n}\n\ndiv.tb-widget .tb-timewindow.no-padding {\n    padding: 0 8px;\n    border: 1px solid rgba(0, 0, 0, 0.08);\n    border-radius: 8px;\n    color: #868D9C;\n    font-weight: 400;\n    font-size: 12px;\n}\n\n.tb-timewindow .mat-icon-button {\n    width: 18px;\n    line-height: 18px;\n    height: 18px;\n    margin-right: 4px;\n}\n\n.tb-timewindow .mat-icon-button .mat-icon {\n    width: 15px;\n    font-size: 15px;\n    line-height: 15px;\n    height: 15px;\n}",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "row" : 0,
          "col" : 0,
          "id" : "1f66e5cb-041d-1a45-1abf-6f6ae3d91872",
          "typeFullFqn" : "system.cards.markdown_card"
        },
        "b5c71687-c799-9b94-00f1-958cf76f006c" : {
          "type" : "latest",
          "sizeX" : 5,
          "sizeY" : 3.5,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "61ca5437-6539-88f4-4f59-a9508eefdf1e",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "label",
                "type" : "entityField",
                "label" : "label",
                "color" : "#f44336",
                "settings" : { },
                "_hash" : 0.9633249686422383,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "moisture",
                "type" : "timeseries",
                "label" : "moisture",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.3069038474738244
              }, {
                "name" : "active",
                "type" : "attribute",
                "label" : "active",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.21255896609213454,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : true,
                "postFuncBody" : "return value === 'true' ? 'Active' : 'Offline';"
              } ]
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1668004676539,
                  "endTimeMs" : 1668091076539
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "useMarkdownTextFunction" : true,
              "markdownTextFunction" : "var statusClass = data[0]['active'] === \"Active\" ? \"active\" : \"inactive\";\nvar moistureTs = data[0]['moisture|ts'];\nvar label = data[0]['label'];\nvar moistureElapsedTsHtml;\nif (moistureTs) {\n    var moistureElapsedTs = new Date().getTime() - moistureTs;\n    var MINUTE = 60 * 1000;\n    var HOUR = 60 * MINUTE;\n    var DAY = 24 * HOUR;\n    if (moistureElapsedTs > DAY) {\n        moistureElapsedTs = Math.floor(moistureElapsedTs / DAY) * DAY;\n    } else if (moistureElapsedTs > HOUR) {\n        moistureElapsedTs = Math.floor(moistureElapsedTs / HOUR) * HOUR;\n    } else if (moistureElapsedTs > MINUTE) {\n        moistureElapsedTs = Math.floor(moistureElapsedTs / MINUTE) * MINUTE;\n    }\n    moistureElapsedTsHtml = '{{ ' + moistureElapsedTs + ' | milliSecondsToTimeString }} ago';\n} else {\n    moistureElapsedTsHtml = 'N/A';\n}\n\nreturn '<div class=\"sensor-details\">' +\n    '<div class=\"header\">' + \n        '<h3 class=\"title\">${entityName}</h3>' + \n        (label ? '<span class=\"sensor-label\">' + label + '</span>' : '') + \n    '</div>' +\n    '<div style=\"padding-bottom: 25px;\"></div>' +\n    '<table>' +\n        '<tr>' +\n            '<td class=\"label\">Last value</td>' +\n            '<td class=\"value\">${moisture:1}%</td>' +\n        '</tr>' +\n        '<tr>' +\n            '<td class=\"label\">Status</td>' +\n            '<td class=\"value\"><span class=\"status '+ statusClass +'\"></span><span style=\"padding-left: 8px;\">${active}</span></td>' +\n        '</tr>' +\n        '<tr>' +\n            '<td class=\"label\">Last update</td>' +\n            '<td class=\"value\">' + moistureElapsedTsHtml + '</td>' +\n        '</tr>' +\n    '</table>' +\n'</div>';\n",
              "applyDefaultMarkdownStyle" : true,
              "markdownCss" : ".tb-markdown-view > div {\n    padding: 0;\n}\n\n.sensor-details .header {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n}\n\n.sensor-details .title {\n    font-weight: 500;\n    font-size: 16px;\n    padding-right: 8px;\n}\n\n.sensor-details .sensor-label {\n    font-weight: 600;\n    font-size: 13px;\n    line-height: 16px;\n    background: rgba(111, 116, 242, 0.08);\n    border-radius: 16px;\n    padding: 4px 8px;\n    color: #5553AF;   \n}\n\n.sensor-details .label {\n    font-weight: 400;\n    font-size: 12px;\n    color: #868D9C;\n    width: 145px;\n    padding-right: 24px;\n}\n\n.sensor-details .value {\n    font-weight: 600;\n    font-size: 13px;\n    color: rgba(0, 0, 0, 0.76);\n}\n\n.sensor-details .value .status {\n    display: inline-block;\n    vertical-align: middle;\n    width: 4px;\n    height: 4px;\n    border-radius: 2px;\n}\n\n.sensor-details .value .status.active {\n    background: #198038;\n}\n\n.sensor-details .value .status.inactive {\n    background: red;\n}"
            },
            "title" : "New Markdown/HTML Card",
            "showTitleIcon" : false,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "widgetStyle" : { },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "showLegend" : false,
            "useDashboardTimewindow" : true,
            "enableDataExport" : false,
            "widgetCss" : ".tb-widget-container > .tb-widget {\n    border-radius: 0px;\n    box-shadow: none;\n}",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "row" : 0,
          "col" : 0,
          "id" : "b5c71687-c799-9b94-00f1-958cf76f006c",
          "typeFullFqn" : "system.cards.markdown_card"
        },
        "fd1083dd-fad3-90c3-8eba-8a8fe0f1d93e" : {
          "type" : "latest",
          "sizeX" : 5,
          "sizeY" : 3.5,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "39927380-423a-872a-0843-de34f99264ad",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "criticalAlarmsCount",
                "type" : "attribute",
                "label" : "criticalAlarmsCount",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.9443086420596323
              }, {
                "name" : "majorAlarmsCount",
                "type" : "attribute",
                "label" : "majorAlarmsCount",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.3039588670801061
              } ]
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1668004676539,
                  "endTimeMs" : 1668091076539
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : true,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "8px",
            "settings" : {
              "useMarkdownTextFunction" : true,
              "markdownTextFunction" : "var criticalAlarmsCount = data[0]['criticalAlarmsCount'];\nvar majorAlarmsCount = data[0]['majorAlarmsCount'];\nif (criticalAlarmsCount) {\n    var text = \"Critical Alarm\";\n    if (criticalAlarmsCount > 1) {\n        text += \"s\";\n    }\n    return '<div class=\"alarms critical\"><div id=\"alarms\" class=\"alarm-card\"><mat-icon>error</mat-icon><span class=\"alarm-text\">' + criticalAlarmsCount + ' ' + text + '</span></div></div>';\n} else if (majorAlarmsCount) {\n    var text = \"Major Alarm\";\n    if (majorAlarmsCount > 1) {\n        text += \"s\";\n    }\n    return '<div class=\"alarms major\"><div id=\"alarms\" class=\"alarm-card\"><mat-icon>warning</mat-icon><span class=\"alarm-text\">' + majorAlarmsCount + ' ' + text + '</span></div></div>';\n} else {\n    return '<div class=\"alarms no-alarms\"><div id=\"alarms\" class=\"alarm-card\"><mat-icon>check_circle_outline</mat-icon><span class=\"alarm-text\">No alarms</span></div></div>';\n}\n",
              "markdownCss" : ".alarms {\n    width: 100%;\n    height: 100%;\n    padding: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n}\n\n.alarms .alarm-card {\n    padding: 18px;\n    border-radius: 8px;\n}\n\n.alarms .alarm-text {\n    font-weight: 400;\n    font-size: 20px;\n    padding-left: 8px;\n    vertical-align: middle;\n}\n\n.alarms .mat-icon {\n    width: 36px;\n    height: 36px;\n    line-height: 36px;\n    font-size: 36px;\n    vertical-align: middle;\n}\n\n@media only screen and (min-width: 960px) and (max-width: 1200px) {\n    .alarms .alarm-card {\n         padding: 12px;\n    }\n    \n    .alarms .alarm-text {\n        font-size: 16px;\n        padding-left: 6px;\n    }\n    \n    .alarms .mat-icon {\n        width: 24px;\n        height: 24px;\n        line-height: 24px;\n        font-size: 24px;\n    }\n}\n\n.alarms.no-alarms .mat-icon {\n    color: #198038;\n}\n\n.alarms.no-alarms .alarm-text {\n    color: #868D9C;\n}\n\n.alarms.critical .alarm-card {\n    background: #D12730;\n}\n\n.alarms.critical .mat-icon, .alarms.critical .alarm-text {\n    color: #ffffff;\n}\n\n.alarms.critical .alarm-text, .alarms.major .alarm-text {\n    font-weight: 500;\n}\n\n.alarms.major .alarm-card {\n    background: #e78202\n}\n\n.alarms.major .mat-icon, .alarms.major .alarm-text {\n    color: #ffffff;\n}\n\n"
            },
            "title" : "Alarms",
            "showTitleIcon" : false,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "widgetStyle" : { },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "showLegend" : false,
            "useDashboardTimewindow" : true,
            "enableDataExport" : false,
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "actions" : {
              "elementClick" : [ {
                "name" : "alarms",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "field_alarms",
                "setEntityId" : true,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "popoverPreferredPlacement" : "left",
                "popoverHideOnClickOutside" : true,
                "popoverHideDashboardToolbar" : true,
                "popoverWidth" : "800px",
                "popoverHeight" : "50vh",
                "popoverStyle" : { },
                "openInSeparateDialog" : false,
                "openInPopover" : true,
                "id" : "699a826e-1f2a-9033-551d-a4853ce8c671"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "fd1083dd-fad3-90c3-8eba-8a8fe0f1d93e",
          "typeFullFqn" : "system.cards.markdown_card"
        },
        "2dcc4fce-85e4-e67d-4467-7bd38e579c5c" : {
          "type" : "alarm",
          "sizeX" : 10.5,
          "sizeY" : 6.5,
          "config" : {
            "timewindow" : {
              "hideAggregation" : false,
              "hideAggInterval" : false,
              "hideTimezone" : false,
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 0,
                "interval" : 1000,
                "timewindowMs" : 86400000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1729593967363,
                  "endTimeMs" : 1729680367363
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              },
              "timezone" : null
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "enableSelection" : true,
              "enableSearch" : true,
              "enableSelectColumnDisplay" : true,
              "enableFilter" : false,
              "enableStickyHeader" : true,
              "enableStickyAction" : false,
              "reserveSpaceForHiddenAction" : "true",
              "displayDetails" : true,
              "allowAcknowledgment" : true,
              "allowClear" : true,
              "displayPagination" : true,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "-createdTime",
              "useRowStyleFunction" : false
            },
            "title" : "New Alarms table",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400,
              "padding" : "5px 10px 5px 0px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "alarmSource" : {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "39927380-423a-872a-0843-de34f99264ad",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "createdTime",
                "type" : "alarm",
                "label" : "Created time",
                "color" : "#2196f3",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.021092237451093787
              }, {
                "name" : "originator",
                "type" : "alarm",
                "label" : "Sensor",
                "color" : "#4caf50",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.2780007688856758,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "type",
                "type" : "alarm",
                "label" : "Type",
                "color" : "#f44336",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.7323586880398418
              }, {
                "name" : "severity",
                "type" : "alarm",
                "label" : "Severity",
                "color" : "#ffc107",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : true,
                  "cellContentFunction" : "var severity = value;\nvar color = 'black';\nswitch (severity) {\n  case 'CRITICAL':\n    color = 'red';\n    break;\n  case 'MAJOR':\n    color = 'orange';\n    break;\n  case 'MINOR':\n    color = '#ffca3d';\n    break;\n  case 'WARNING':\n    color = '#abab00';\n    break;\n  case 'INDETERMINATE':\n    color = 'green';\n    break;\n}\n\nseverity = severity.toLowerCase();\nseverity = severity.charAt(0).toUpperCase() + severity.slice(1);\n\nreturn '<span style=\"font-weight: bold; color: ' + color +' !important;\">' + severity + '<span>';\n",
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled",
                  "columnExportOption" : "onlyVisible"
                },
                "_hash" : 0.09927019860088193,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "status",
                "type" : "alarm",
                "label" : "Status",
                "color" : "#607d8b",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.6588418951443418
              } ]
            },
            "alarmsPollingInterval" : 5,
            "showTitleIcon" : false,
            "titleIcon" : "more_horiz",
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "widgetStyle" : { },
            "displayTimewindow" : true,
            "actions" : { },
            "datasources" : [ ],
            "enableDataExport" : false,
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "alarmFilterConfig" : {
              "statusList" : [ "ACTIVE" ],
              "severityList" : [ ],
              "typeList" : [ ],
              "searchPropagatedAlarms" : true,
              "assignedToCurrentUser" : false,
              "assigneeId" : null
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "2dcc4fce-85e4-e67d-4467-7bd38e579c5c",
          "typeFullFqn" : "system.alarm_widgets.alarms_table"
        },
        "aac826ba-ba9f-7e72-752f-3a0a6b9cddb5" : {
          "type" : "latest",
          "sizeX" : 5,
          "sizeY" : 3.5,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "61ca5437-6539-88f4-4f59-a9508eefdf1e",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "criticalAlarmsCount",
                "type" : "attribute",
                "label" : "criticalAlarmsCount",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.09047361437069745
              }, {
                "name" : "majorAlarmsCount",
                "type" : "attribute",
                "label" : "majorAlarmsCount",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.27501871866952143
              } ]
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1668004676539,
                  "endTimeMs" : 1668091076539
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "useMarkdownTextFunction" : true,
              "markdownTextFunction" : "var criticalAlarmsCount = data[0]['criticalAlarmsCount'];\nvar majorAlarmsCount = data[0]['majorAlarmsCount'];\nvar crtiticalAlarmsText = 'N/A';\nvar majorAlarmsText = 'N/A';\nvar criticalAlarmsClass = 'alarms';\nvar criticalAlarmsId = '';\nvar majorAlarmsClass = 'alarms';\nvar majorAlarmsId = '';\nif (typeof criticalAlarmsCount === 'number') {\n    if (criticalAlarmsCount == 0) {\n        crtiticalAlarmsText = 'No alarms';\n    } else {\n        crtiticalAlarmsText = criticalAlarmsCount + ' alarm';\n        if (criticalAlarmsCount > 1) {\n            crtiticalAlarmsText += 's';\n        }\n        criticalAlarmsClass += ' critical';\n        criticalAlarmsId = ' id=\"sensor-alarms\" '\n    }\n}\nif (typeof majorAlarmsCount === 'number') {\n    if (majorAlarmsCount === 0) {\n        majorAlarmsText = 'No alarms';\n    } else {\n        majorAlarmsText = majorAlarmsCount + ' alarm';\n        if (majorAlarmsCount > 1) {\n            majorAlarmsText += 's';\n        }\n        majorAlarmsClass += ' major';\n        majorAlarmsId = ' id=\"sensor-alarms\" '\n    }\n}\nreturn '<div class=\"sensor-details\">' +\n    '<table>' +\n        '<tr>' +\n            '<td class=\"label\">Critical alarms</td>' +\n            '<td class=\"value\"><span ' + criticalAlarmsId + ' class=\"' + criticalAlarmsClass + '\">' + crtiticalAlarmsText + '</span></td>' +\n        '</tr>' +\n        '<tr>' +\n            '<td class=\"label\">Major alarms</td>' +\n            '<td class=\"value\"><span ' + majorAlarmsId + ' class=\"' + majorAlarmsClass + '\">' + majorAlarmsText + '</span></td>' +\n        '</tr>' +\n    '</table>' +\n'</div>';\n",
              "applyDefaultMarkdownStyle" : true,
              "markdownCss" : ".tb-markdown-view > div {\n    padding: 0;\n}\n\n.sensor-details .label {\n    font-weight: 400;\n    font-size: 12px;\n    color: #868D9C;\n    width: 145px;\n    padding-right: 24px;\n}\n\n.sensor-details .value {\n    font-weight: 600;\n    font-size: 13px;\n    color: rgba(0, 0, 0, 0.76);\n}\n\n.sensor-details .value .alarms {\n    border-radius: 16px;\n}\n\n.sensor-details .value .alarms.critical {\n    padding: 4px 8px;\n    background: #D12730;\n    color: #fff;\n    cursor: pointer;\n}\n\n.sensor-details .value .alarms.major {\n    padding: 4px 8px;\n    border: solid 2px #e78202;\n    color: #e78202;\n    cursor: pointer;\n}\n"
            },
            "title" : "New Markdown/HTML Card",
            "showTitleIcon" : false,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "widgetStyle" : { },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "showLegend" : false,
            "useDashboardTimewindow" : true,
            "enableDataExport" : false,
            "widgetCss" : ".tb-widget-container > .tb-widget {\n    border-radius: 0px;\n    box-shadow: none;\n}",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "actions" : {
              "elementClick" : [ {
                "name" : "sensor-alarms",
                "icon" : "more_horiz",
                "useShowWidgetActionFunction" : null,
                "showWidgetActionFunction" : "return true;",
                "type" : "openDashboardState",
                "targetDashboardStateId" : "sensor_alarms",
                "setEntityId" : true,
                "stateEntityParamName" : null,
                "openRightLayout" : false,
                "popoverPreferredPlacement" : "top",
                "popoverHideOnClickOutside" : true,
                "popoverHideDashboardToolbar" : true,
                "popoverWidth" : "750px",
                "popoverHeight" : "40vh",
                "popoverStyle" : { },
                "openInSeparateDialog" : false,
                "openInPopover" : true,
                "id" : "86f8f07a-ebef-5c54-bdde-dacb5f505061"
              } ]
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "aac826ba-ba9f-7e72-752f-3a0a6b9cddb5",
          "typeFullFqn" : "system.cards.markdown_card"
        },
        "8923d335-d974-2aaa-8c40-3eafec174a58" : {
          "type" : "alarm",
          "sizeX" : 10.5,
          "sizeY" : 6.5,
          "config" : {
            "timewindow" : {
              "realtime" : {
                "interval" : 1000,
                "timewindowMs" : 86400000
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "enableSelection" : true,
              "enableSearch" : true,
              "enableSelectColumnDisplay" : true,
              "enableFilter" : false,
              "enableStickyHeader" : true,
              "enableStickyAction" : false,
              "reserveSpaceForHiddenAction" : "true",
              "displayDetails" : true,
              "allowAcknowledgment" : true,
              "allowClear" : true,
              "displayPagination" : true,
              "defaultPageSize" : 10,
              "defaultSortOrder" : "-createdTime",
              "useRowStyleFunction" : false
            },
            "title" : "New Alarms table",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400,
              "padding" : "5px 10px 5px 0px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "alarmSource" : {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "61ca5437-6539-88f4-4f59-a9508eefdf1e",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "createdTime",
                "type" : "alarm",
                "label" : "Created time",
                "color" : "#2196f3",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.021092237451093787
              }, {
                "name" : "type",
                "type" : "alarm",
                "label" : "Type",
                "color" : "#f44336",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.7323586880398418
              }, {
                "name" : "severity",
                "type" : "alarm",
                "label" : "Severity",
                "color" : "#ffc107",
                "settings" : {
                  "columnWidth" : "0px",
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : true,
                  "cellContentFunction" : "var severity = value;\nvar color = 'black';\nswitch (severity) {\n  case 'CRITICAL':\n    color = 'red';\n    break;\n  case 'MAJOR':\n    color = 'orange';\n    break;\n  case 'MINOR':\n    color = '#ffca3d';\n    break;\n  case 'WARNING':\n    color = '#abab00';\n    break;\n  case 'INDETERMINATE':\n    color = 'green';\n    break;\n}\n\nseverity = severity.toLowerCase();\nseverity = severity.charAt(0).toUpperCase() + severity.slice(1);\n\nreturn '<span style=\"font-weight: bold; color: ' + color +' !important;\">' + severity + '<span>';\n",
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled",
                  "columnExportOption" : "onlyVisible"
                },
                "_hash" : 0.09927019860088193,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "status",
                "type" : "alarm",
                "label" : "Status",
                "color" : "#607d8b",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "cellStyleFunction" : "",
                  "useCellContentFunction" : false,
                  "cellContentFunction" : ""
                },
                "_hash" : 0.6588418951443418
              } ]
            },
            "alarmsPollingInterval" : 5,
            "showTitleIcon" : false,
            "titleIcon" : "more_horiz",
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "widgetStyle" : { },
            "displayTimewindow" : true,
            "actions" : { },
            "datasources" : [ ],
            "enableDataExport" : false,
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "alarmFilterConfig" : {
              "statusList" : [ "ACTIVE" ],
              "severityList" : [ ],
              "typeList" : [ ],
              "searchPropagatedAlarms" : true
            }
          },
          "row" : 0,
          "col" : 0,
          "id" : "8923d335-d974-2aaa-8c40-3eafec174a58",
          "typeFullFqn" : "system.alarm_widgets.alarms_table"
        },
        "e18122c8-7973-5206-792a-cfa7f924a7b0" : {
          "type" : "timeseries",
          "sizeX" : 8,
          "sizeY" : 6.5,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "39927380-423a-872a-0843-de34f99264ad",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "irrigationTask",
                "type" : "timeseries",
                "label" : "Start day",
                "color" : "#4caf50",
                "settings" : {
                  "useCellStyleFunction" : true,
                  "cellStyleFunction" : "return {\n    minWidth: '60px',\n    width: '60px',\n    maxWidth: '60px'\n}",
                  "useCellContentFunction" : true,
                  "cellContentFunction" : "var data;\nif (value) {\n    try {\n        data = JSON.parse(value);\n    } catch (e){}\n}\nif (data) {\n    var dateFormat;\n    if (new Date().getYear() === new Date(data.startTs).getYear()) {\n        dateFormat = 'd MMM';\n    } else {\n        dateFormat = 'd MMM yyyy';\n    }\n    return ctx.date.transform(data.startTs, dateFormat);\n} else {\n    return '';\n}"
                },
                "_hash" : 0.7275755335760952,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "irrigationTask",
                "type" : "timeseries",
                "label" : "Start time",
                "color" : "#9c27b0",
                "settings" : {
                  "useCellStyleFunction" : true,
                  "cellStyleFunction" : "return {\n    minWidth: '60px',\n    width: '60px',\n    maxWidth: '60px'\n}",
                  "useCellContentFunction" : true,
                  "cellContentFunction" : "var data;\nif (value) {\n    try {\n        data = JSON.parse(value);\n    } catch (e){}\n}\nif (data) {\n    var time = ctx.date.transform(data.startTs, 'HH:mm');\n    return '<span style=\"font-weight: 600; background: rgba(111, 116, 242, 0.08); border-radius: 16px; padding: 4px 8px; color: #5553AF;\">'+time+'</span>';\n} else {\n    return '';\n}\n"
                },
                "_hash" : 0.914222992801236,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "irrigationTask",
                "type" : "timeseries",
                "label" : "End rule",
                "color" : "#2196f3",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : true,
                  "cellContentFunction" : "var data;\nif (value) {\n    try {\n        data = JSON.parse(value);\n    } catch (e){}\n}\nif (data) {\n    var durationThreshold = data.durationThreshold;\n    var consumptionThreshold = data.consumptionThreshold;\n    var text = 'N/A';\n    if (durationThreshold) {\n        text = (durationThreshold / 60000).toFixed(0) + ' min';\n    } else if (consumptionThreshold) {\n        text = consumptionThreshold.toFixed(0) + ' l';\n    }\n    return '<span style=\"font-weight: 600; background: rgba(111, 116, 242, 0.08); border-radius: 16px; padding: 4px 8px;  color: #5553AF;\">'+text+'</span>';\n} else {\n    return '';\n}\n"
                },
                "_hash" : 0.40035296849915825,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "irrigationTask",
                "type" : "timeseries",
                "label" : "Duration",
                "color" : "#f44336",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : true,
                  "cellContentFunction" : "var data;\nif (value) {\n    try {\n        data = JSON.parse(value);\n    } catch (e){}\n}\nif (data) {\n    var duration = data.duration;\n    if (typeof duration === 'number') {\n        return '~' + (duration / 60000).toFixed(0) + ' min';\n    } else {\n        return 'N/A'\n    }\n} else {\n    return 'N/A';\n}\n"
                },
                "_hash" : 0.16840508210390004,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "irrigationTask",
                "type" : "timeseries",
                "label" : "Volume",
                "color" : "#ffc107",
                "settings" : {
                  "useCellStyleFunction" : false,
                  "useCellContentFunction" : true,
                  "cellContentFunction" : "var data;\nif (value) {\n    try {\n        data = JSON.parse(value);\n    } catch (e){}\n}\nif (data) {\n    var consumption = data.consumption;\n    if (typeof consumption === 'number') {\n        return consumption.toFixed(0) + ' l';\n    } else {\n        return 'N/A'\n    }\n} else {\n    return 'N/A';\n}\n"
                },
                "_hash" : 0.9378980877980216,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "irrigationTask",
                "type" : "timeseries",
                "label" : "Progress",
                "color" : "#607d8b",
                "settings" : {
                  "useCellStyleFunction" : true,
                  "cellStyleFunction" : "return {\n    width: '30%'\n}",
                  "useCellContentFunction" : true,
                  "cellContentFunction" : "var data;\nif (value) {\n    try {\n        data = JSON.parse(value);\n    } catch (e){}\n}\nif (data) {\n    var durationThreshold = data.durationThreshold;\n    var consumptionThreshold = data.consumptionThreshold;\n    var progress = 0;\n    if (durationThreshold) {\n        progress = data.duration ? (data.duration / durationThreshold * 100) : 0;\n    } else if (consumptionThreshold) {\n        progress = data.consumption ? (data.consumption / consumptionThreshold * 100) : 0;\n    }\n    var percent = progress + '%';\n    var percentText = progress.toFixed(0) + '%';\n    var background = '111, 116, 242';\n    var textColor = '#5553AF';\n    return '<div style=\"width: 100%; height: 16px; background: linear-gradient(to right, rgba('+background+', 0.16) '+percent+', rgba('+background+', 0.08) '+percent+'); border-radius: 5.21053px; line-height: normal;\"><span style=\"padding-left: 4px; font-weight: 600; font-size: 13px; color: '+textColor+';\">'+percentText+'</span></div>';\n} else {\n    return '';\n}\n"
                },
                "_hash" : 0.5459599068099552,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ],
              "latestDataKeys" : [ ]
            } ],
            "timewindow" : {
              "hideAggregation" : true,
              "hideAggInterval" : true,
              "hideTimezone" : true,
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 0,
                "timewindowMs" : 604800000,
                "quickInterval" : "CURRENT_DAY",
                "interval" : 1000
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 1000
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "enableSearch" : false,
              "enableStickyHeader" : true,
              "enableStickyAction" : true,
              "reserveSpaceForHiddenAction" : "true",
              "showTimestamp" : false,
              "showMilliseconds" : false,
              "displayPagination" : true,
              "useEntityLabel" : false,
              "defaultPageSize" : 10,
              "hideEmptyLines" : false,
              "disableStickyHeader" : false,
              "useRowStyleFunction" : false
            },
            "title" : "Irrigation Tasks",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400,
              "padding" : "5px 10px 5px 2px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "widgetStyle" : { },
            "actions" : { },
            "showTitleIcon" : false,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "displayTimewindow" : true,
            "titleTooltip" : "",
            "enableDataExport" : false,
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "row" : 0,
          "col" : 0,
          "id" : "e18122c8-7973-5206-792a-cfa7f924a7b0",
          "typeFullFqn" : "system.cards.timeseries_table"
        },
        "aaccdb0d-72ff-9f2c-e4ae-55077480a3e6" : {
          "type" : "latest",
          "sizeX" : 5,
          "sizeY" : 3.5,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "264356aa-f5f0-6605-d246-750736edf5c6",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "valve_0_status",
                "type" : "timeseries",
                "label" : "valve_0_status",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.2726236242734901
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              }
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1668004676539,
                  "endTimeMs" : 1668091076539
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "useMarkdownTextFunction" : true,
              "markdownTextFunction" : "var fieldData = data[0];\nvar irrigationEnabled = data[0]['irrigationState'] === 'ON';\nvar indicatorClass = irrigationEnabled ? 'status-on' : 'status-off';\nvar irrigationStatusText = irrigationEnabled ? 'ON' : 'OFF';\n\nreturn '<div class=\"irrigation-status-container\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\">' +\n'<div class=\"irrigation-status-label\">Irrigation status</div>' +\n'<div class=\"irrigation-status\">'+\n  '<span class=\"indicator '+ indicatorClass +'\"></span>'+\n  '<span class=\"irrigation-status-text\">'+irrigationStatusText+'</span>'+\n'</div>' +\n'</div>';\n",
              "markdownCss" : ".irrigation-status-container {\n    height: 100%; padding-left: 13px;\n}\n\n.irrigation-status-label {\n    font-size: 16px;\n    font-weight: 400;\n    color: #868D9C;\n}\n\n.indicator {\n    width: 24px; \n    height: 24px; \n    border-radius: 12px;\n    display: inline-block; \n    vertical-align: middle;\n    margin-right: 8px;\n}\n\n.indicator.status-on {\n    background: #198038;\n}\n\n.indicator.status-off {\n    background: #aaa;\n}\n\n.irrigation-status-text {\n    display: inline-block; \n    vertical-align: middle;\n    font-size: 24px;\n    font-weight: 700;\n    color: #000;\n}\n\n@media only screen and (min-width: 960px) and (max-width: 1200px) {\n    .irrigation-status-container {\n        padding-right: 13px;\n    }\n    \n    .indicator {\n        width: 16px; \n        height: 16px; \n        border-radius: 8px;\n        margin-right: 4px;\n    }\n    \n    .irrigation-status-text {\n        font-size: 16px;\n    }\n}"
            },
            "title" : "New Markdown/HTML Card",
            "showTitleIcon" : false,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "widgetStyle" : { },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "showLegend" : false,
            "useDashboardTimewindow" : true,
            "enableDataExport" : false,
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : "",
            "displayTimewindow" : true
          },
          "row" : 0,
          "col" : 0,
          "id" : "aaccdb0d-72ff-9f2c-e4ae-55077480a3e6",
          "typeFullFqn" : "system.cards.markdown_card"
        },
        "7dadc15d-b85b-8ef0-5de1-6c23d0acea73" : {
          "typeFullFqn" : "system.time_series_chart",
          "type" : "timeseries",
          "sizeX" : 8,
          "sizeY" : 5,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : "",
              "entityAliasId" : "39927380-423a-872a-0843-de34f99264ad",
              "dataKeys" : [ {
                "name" : "avgMoisture",
                "type" : "timeseries",
                "label" : "Moisture",
                "color" : "#6F74F2",
                "settings" : {
                  "yAxisId" : "default",
                  "showInLegend" : true,
                  "dataHiddenByDefault" : false,
                  "type" : "line",
                  "lineSettings" : {
                    "showLine" : true,
                    "step" : false,
                    "stepType" : "start",
                    "smooth" : true,
                    "lineType" : "solid",
                    "lineWidth" : 2,
                    "showPoints" : false,
                    "showPointLabel" : false,
                    "pointLabelPosition" : "top",
                    "pointLabelFont" : {
                      "family" : "Roboto",
                      "size" : 11,
                      "sizeUnit" : "px",
                      "style" : "normal",
                      "weight" : "400",
                      "lineHeight" : "1"
                    },
                    "pointLabelColor" : "rgba(0, 0, 0, 0.76)",
                    "enablePointLabelBackground" : false,
                    "pointLabelBackground" : "rgba(255,255,255,0.56)",
                    "pointShape" : "circle",
                    "pointSize" : 12,
                    "fillAreaSettings" : {
                      "type" : "none",
                      "opacity" : 0.4,
                      "gradient" : {
                        "start" : 100,
                        "end" : 0
                      }
                    }
                  },
                  "barSettings" : {
                    "showBorder" : false,
                    "borderWidth" : 2,
                    "borderRadius" : 0,
                    "showLabel" : false,
                    "labelPosition" : "top",
                    "labelFont" : {
                      "family" : "Roboto",
                      "size" : 11,
                      "sizeUnit" : "px",
                      "style" : "normal",
                      "weight" : "400",
                      "lineHeight" : "1"
                    },
                    "labelColor" : "rgba(0, 0, 0, 0.76)",
                    "enableLabelBackground" : false,
                    "labelBackground" : "rgba(255,255,255,0.56)",
                    "backgroundSettings" : {
                      "type" : "none",
                      "opacity" : 0.4,
                      "gradient" : {
                        "start" : 100,
                        "end" : 0
                      }
                    }
                  },
                  "tooltipValueFormatter" : null,
                  "comparisonSettings" : {
                    "showValuesForComparison" : false,
                    "comparisonValuesLabel" : "",
                    "color" : ""
                  }
                },
                "_hash" : 0.7552082927145491,
                "units" : "%",
                "decimals" : null,
                "aggregationType" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              }, {
                "name" : "waterConsumption",
                "type" : "timeseries",
                "label" : "Consumption",
                "color" : "#4caf50",
                "settings" : {
                  "yAxisId" : "axis1",
                  "showInLegend" : true,
                  "dataHiddenByDefault" : false,
                  "type" : "line",
                  "lineSettings" : {
                    "showLine" : true,
                    "step" : false,
                    "stepType" : "start",
                    "smooth" : true,
                    "lineType" : "solid",
                    "lineWidth" : 2,
                    "showPoints" : false,
                    "showPointLabel" : false,
                    "pointLabelPosition" : "top",
                    "pointLabelFont" : {
                      "family" : "Roboto",
                      "size" : 11,
                      "sizeUnit" : "px",
                      "style" : "normal",
                      "weight" : "400",
                      "lineHeight" : "1"
                    },
                    "pointLabelColor" : "rgba(0, 0, 0, 0.76)",
                    "enablePointLabelBackground" : false,
                    "pointLabelBackground" : "rgba(255,255,255,0.56)",
                    "pointShape" : "circle",
                    "pointSize" : 12,
                    "fillAreaSettings" : {
                      "type" : "none",
                      "opacity" : 0.4,
                      "gradient" : {
                        "start" : 100,
                        "end" : 0
                      }
                    }
                  },
                  "barSettings" : {
                    "showBorder" : false,
                    "borderWidth" : 2,
                    "borderRadius" : 0,
                    "showLabel" : false,
                    "labelPosition" : "top",
                    "labelFont" : {
                      "family" : "Roboto",
                      "size" : 11,
                      "sizeUnit" : "px",
                      "style" : "normal",
                      "weight" : "400",
                      "lineHeight" : "1"
                    },
                    "labelColor" : "rgba(0, 0, 0, 0.76)",
                    "enableLabelBackground" : false,
                    "labelBackground" : "rgba(255,255,255,0.56)",
                    "backgroundSettings" : {
                      "type" : "none",
                      "opacity" : 0.4,
                      "gradient" : {
                        "start" : 100,
                        "end" : 0
                      }
                    }
                  },
                  "tooltipValueFormatter" : null,
                  "comparisonSettings" : {
                    "showValuesForComparison" : false,
                    "comparisonValuesLabel" : "",
                    "color" : ""
                  }
                },
                "_hash" : 0.191123640361619,
                "units" : "L",
                "decimals" : null,
                "aggregationType" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              },
              "latestDataKeys" : [ {
                "name" : "minMoistureThreshold",
                "type" : "attribute",
                "label" : "minMoistureThreshold",
                "color" : "#f44336",
                "settings" : {
                  "__thresholdKey" : true
                },
                "_hash" : 0.30616283218066975
              }, {
                "name" : "maxMoistureThreshold",
                "type" : "attribute",
                "label" : "maxMoistureThreshold",
                "color" : "#ffc107",
                "settings" : {
                  "__thresholdKey" : true
                },
                "_hash" : 0.6910259517980766
              } ]
            } ],
            "timewindow" : {
              "hideAggregation" : false,
              "hideAggInterval" : false,
              "hideTimezone" : false,
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 0,
                "timewindowMs" : 604800000,
                "quickInterval" : "CURRENT_DAY",
                "interval" : 1800000
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 50000
              },
              "timezone" : null
            },
            "showTitle" : true,
            "backgroundColor" : "rgba(0, 0, 0, 0)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "comparisonEnabled" : false,
              "timeForComparison" : "previousInterval",
              "comparisonCustomIntervalValue" : 7200000,
              "comparisonXAxis" : {
                "show" : true,
                "label" : "",
                "labelFont" : {
                  "family" : "Roboto",
                  "size" : 12,
                  "sizeUnit" : "px",
                  "style" : "normal",
                  "weight" : "600",
                  "lineHeight" : "1"
                },
                "labelColor" : "rgba(0, 0, 0, 0.54)",
                "position" : "top",
                "showTickLabels" : true,
                "tickLabelFont" : {
                  "family" : "Roboto",
                  "size" : 10,
                  "sizeUnit" : "px",
                  "style" : "normal",
                  "weight" : "400",
                  "lineHeight" : "1"
                },
                "tickLabelColor" : "rgba(0, 0, 0, 0.54)",
                "ticksFormat" : { },
                "showTicks" : true,
                "ticksColor" : "rgba(0, 0, 0, 0.54)",
                "showLine" : true,
                "lineColor" : "rgba(0, 0, 0, 0.54)",
                "showSplitLines" : true,
                "splitLinesColor" : "rgba(0, 0, 0, 0.12)"
              },
              "yAxes" : {
                "default" : {
                  "units" : "%",
                  "decimals" : null,
                  "show" : true,
                  "label" : "",
                  "labelFont" : {
                    "family" : "Roboto",
                    "size" : 12,
                    "sizeUnit" : "px",
                    "style" : "normal",
                    "weight" : "600",
                    "lineHeight" : "1"
                  },
                  "labelColor" : "rgba(0, 0, 0, 0.54)",
                  "position" : "left",
                  "showTickLabels" : true,
                  "tickLabelFont" : {
                    "family" : "Roboto",
                    "size" : 12,
                    "sizeUnit" : "px",
                    "style" : "normal",
                    "weight" : "400",
                    "lineHeight" : "1"
                  },
                  "tickLabelColor" : "rgba(0, 0, 0, 0.54)",
                  "ticksFormatter" : null,
                  "showTicks" : false,
                  "ticksColor" : "rgba(0, 0, 0, 0.54)",
                  "showLine" : false,
                  "lineColor" : "rgba(0, 0, 0, 0.54)",
                  "showSplitLines" : true,
                  "splitLinesColor" : "rgba(0, 0, 0, 0.12)",
                  "id" : "default",
                  "order" : 0,
                  "min" : null,
                  "max" : null,
                  "ticksGenerator" : null,
                  "interval" : null,
                  "splitNumber" : null
                },
                "axis1" : {
                  "units" : "L",
                  "decimals" : null,
                  "show" : true,
                  "label" : "",
                  "labelFont" : {
                    "family" : "Roboto",
                    "size" : 12,
                    "sizeUnit" : "px",
                    "style" : "normal",
                    "weight" : "600",
                    "lineHeight" : "1"
                  },
                  "labelColor" : "rgba(0, 0, 0, 0.54)",
                  "position" : "left",
                  "showTickLabels" : true,
                  "tickLabelFont" : {
                    "family" : "Roboto",
                    "size" : 12,
                    "sizeUnit" : "px",
                    "style" : "normal",
                    "weight" : "400",
                    "lineHeight" : "1"
                  },
                  "tickLabelColor" : "rgba(0, 0, 0, 0.54)",
                  "ticksFormatter" : null,
                  "showTicks" : true,
                  "ticksColor" : "rgba(0, 0, 0, 0.54)",
                  "showLine" : true,
                  "lineColor" : "rgba(0, 0, 0, 0.54)",
                  "showSplitLines" : true,
                  "splitLinesColor" : "rgba(0, 0, 0, 0.12)",
                  "id" : "axis1",
                  "order" : 1
                }
              },
              "thresholds" : [ {
                "type" : "latestKey",
                "yAxisId" : "default",
                "units" : "%",
                "decimals" : null,
                "lineColor" : "#FF6707",
                "lineType" : "solid",
                "lineWidth" : 2,
                "startSymbol" : "none",
                "startSymbolSize" : 5,
                "endSymbol" : "arrow",
                "endSymbolSize" : 5,
                "showLabel" : true,
                "labelPosition" : "insideEndTop",
                "labelFont" : {
                  "size" : 12,
                  "family" : "Roboto",
                  "weight" : "500",
                  "style" : "normal"
                },
                "labelColor" : "rgb(255, 255, 255)",
                "enableLabelBackground" : true,
                "labelBackground" : "#FF6707",
                "latestKey" : "minMoistureThreshold",
                "latestKeyType" : "attribute"
              }, {
                "type" : "latestKey",
                "yAxisId" : "default",
                "units" : "%",
                "decimals" : null,
                "lineColor" : "#FF6707",
                "lineType" : "solid",
                "lineWidth" : 2,
                "startSymbol" : "none",
                "startSymbolSize" : 5,
                "endSymbol" : "arrow",
                "endSymbolSize" : 5,
                "showLabel" : true,
                "labelPosition" : "insideEndTop",
                "labelFont" : {
                  "size" : 12,
                  "family" : "Roboto",
                  "weight" : "500",
                  "style" : "normal"
                },
                "labelColor" : "rgb(255, 255, 255)",
                "enableLabelBackground" : true,
                "labelBackground" : "#FF6707",
                "latestKey" : "maxMoistureThreshold",
                "latestKeyType" : "attribute"
              } ],
              "dataZoom" : true,
              "stack" : false,
              "grid" : {
                "show" : false,
                "backgroundColor" : null,
                "borderWidth" : 1,
                "borderColor" : "#ccc"
              },
              "xAxis" : {
                "show" : true,
                "label" : "",
                "labelFont" : {
                  "family" : "Roboto",
                  "size" : 12,
                  "sizeUnit" : "px",
                  "style" : "normal",
                  "weight" : "600",
                  "lineHeight" : "1"
                },
                "labelColor" : "rgba(0, 0, 0, 0.54)",
                "position" : "bottom",
                "showTickLabels" : true,
                "tickLabelFont" : {
                  "family" : "Roboto",
                  "size" : 10,
                  "sizeUnit" : "px",
                  "style" : "normal",
                  "weight" : "400",
                  "lineHeight" : "1"
                },
                "tickLabelColor" : "rgba(0, 0, 0, 0.54)",
                "ticksFormat" : { },
                "showTicks" : false,
                "ticksColor" : "rgba(0, 0, 0, 0.54)",
                "showLine" : false,
                "lineColor" : "rgba(0, 0, 0, 0.54)",
                "showSplitLines" : false,
                "splitLinesColor" : "rgba(0, 0, 0, 0.12)"
              },
              "noAggregationBarWidthSettings" : {
                "strategy" : "group",
                "groupWidth" : {
                  "relative" : true,
                  "relativeWidth" : 2,
                  "absoluteWidth" : 1000
                },
                "barWidth" : {
                  "relative" : true,
                  "relativeWidth" : 2,
                  "absoluteWidth" : 1000
                }
              },
              "showLegend" : true,
              "legendLabelFont" : {
                "family" : "Roboto",
                "size" : 12,
                "sizeUnit" : "px",
                "style" : "normal",
                "weight" : "400",
                "lineHeight" : "16px"
              },
              "legendLabelColor" : "#868D9C",
              "legendConfig" : {
                "direction" : "column",
                "position" : "top",
                "sortDataKeys" : false,
                "showMin" : false,
                "showMax" : false,
                "showAvg" : false,
                "showTotal" : false,
                "showLatest" : false
              },
              "showTooltip" : true,
              "tooltipTrigger" : "axis",
              "tooltipValueFont" : {
                "family" : "Roboto",
                "size" : 12,
                "sizeUnit" : "px",
                "style" : "normal",
                "weight" : "500",
                "lineHeight" : "16px"
              },
              "tooltipValueColor" : "rgba(0, 0, 0, 0.76)",
              "tooltipValueFormatter" : null,
              "tooltipShowDate" : true,
              "tooltipDateFormat" : {
                "format" : null,
                "lastUpdateAgo" : false,
                "custom" : false,
                "auto" : true,
                "autoDateFormatSettings" : {
                  "millisecond" : "MMM dd yyyy HH:mm:ss"
                }
              },
              "tooltipDateFont" : {
                "family" : "Roboto",
                "size" : 11,
                "sizeUnit" : "px",
                "style" : "normal",
                "weight" : "400",
                "lineHeight" : "16px"
              },
              "tooltipDateColor" : "rgba(0, 0, 0, 0.76)",
              "tooltipDateInterval" : false,
              "tooltipBackgroundColor" : "rgba(255, 255, 255, 0.76)",
              "tooltipBackgroundBlur" : 4,
              "animation" : {
                "animation" : true,
                "animationThreshold" : 2000,
                "animationDuration" : 500,
                "animationEasing" : "cubicOut",
                "animationDelay" : 0,
                "animationDurationUpdate" : 300,
                "animationEasingUpdate" : "cubicOut",
                "animationDelayUpdate" : 0
              },
              "background" : {
                "type" : "color",
                "color" : "#fff",
                "overlay" : {
                  "enabled" : false,
                  "color" : "rgba(255,255,255,0.72)",
                  "blur" : 3
                }
              },
              "padding" : "12px"
            },
            "title" : "Statistics",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : null,
            "mobileHeight" : 4,
            "configMode" : "basic",
            "actions" : { },
            "showTitleIcon" : false,
            "titleIcon" : "thermostat",
            "iconColor" : "#1F6BDD",
            "useDashboardTimewindow" : false,
            "displayTimewindow" : true,
            "titleFont" : {
              "size" : 16,
              "sizeUnit" : "px",
              "family" : "Roboto",
              "weight" : "400",
              "style" : "normal",
              "lineHeight" : "24px"
            },
            "titleColor" : null,
            "titleTooltip" : "",
            "widgetStyle" : { },
            "widgetCss" : "",
            "pageSize" : 1024,
            "units" : "",
            "decimals" : null,
            "noDataDisplayMessage" : "",
            "timewindowStyle" : {
              "showIcon" : false,
              "iconSize" : "24px",
              "icon" : null,
              "iconPosition" : "left",
              "font" : {
                "size" : 12,
                "sizeUnit" : "px",
                "family" : "Roboto",
                "weight" : "400",
                "style" : "normal",
                "lineHeight" : "16px"
              },
              "color" : "rgba(0, 0, 0, 0.38)",
              "displayTypePrefix" : true
            },
            "margin" : "0px",
            "borderRadius" : "",
            "iconSize" : "0px",
            "enableDataExport" : false,
            "mobileOrder" : 0
          },
          "row" : 0,
          "col" : 0,
          "id" : "7dadc15d-b85b-8ef0-5de1-6c23d0acea73"
        },
        "f99ce7c5-d0b0-0292-d803-78aba8ba3b31" : {
          "typeFullFqn" : "system.time_series_chart",
          "type" : "timeseries",
          "sizeX" : 8,
          "sizeY" : 5,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : "",
              "entityAliasId" : "61ca5437-6539-88f4-4f59-a9508eefdf1e",
              "dataKeys" : [ {
                "name" : "moisture",
                "type" : "timeseries",
                "label" : "Moisture",
                "color" : "#6F74F2",
                "settings" : {
                  "yAxisId" : "default",
                  "showInLegend" : true,
                  "dataHiddenByDefault" : false,
                  "type" : "line",
                  "lineSettings" : {
                    "showLine" : true,
                    "step" : false,
                    "stepType" : "start",
                    "smooth" : true,
                    "lineType" : "solid",
                    "lineWidth" : 2,
                    "showPoints" : false,
                    "showPointLabel" : false,
                    "pointLabelPosition" : "top",
                    "pointLabelFont" : {
                      "family" : "Roboto",
                      "size" : 11,
                      "sizeUnit" : "px",
                      "style" : "normal",
                      "weight" : "400",
                      "lineHeight" : "1"
                    },
                    "pointLabelColor" : "rgba(0, 0, 0, 0.76)",
                    "enablePointLabelBackground" : false,
                    "pointLabelBackground" : "rgba(255,255,255,0.56)",
                    "pointShape" : "circle",
                    "pointSize" : 12,
                    "fillAreaSettings" : {
                      "type" : "none",
                      "opacity" : 0.4,
                      "gradient" : {
                        "start" : 100,
                        "end" : 0
                      }
                    }
                  },
                  "barSettings" : {
                    "showBorder" : false,
                    "borderWidth" : 2,
                    "borderRadius" : 0,
                    "showLabel" : false,
                    "labelPosition" : "top",
                    "labelFont" : {
                      "family" : "Roboto",
                      "size" : 11,
                      "sizeUnit" : "px",
                      "style" : "normal",
                      "weight" : "400",
                      "lineHeight" : "1"
                    },
                    "labelColor" : "rgba(0, 0, 0, 0.76)",
                    "enableLabelBackground" : false,
                    "labelBackground" : "rgba(255,255,255,0.56)",
                    "backgroundSettings" : {
                      "type" : "none",
                      "opacity" : 0.4,
                      "gradient" : {
                        "start" : 100,
                        "end" : 0
                      }
                    }
                  },
                  "tooltipValueFormatter" : null,
                  "comparisonSettings" : {
                    "showValuesForComparison" : false,
                    "comparisonValuesLabel" : "",
                    "color" : ""
                  }
                },
                "_hash" : 0.7552082927145491,
                "units" : "%",
                "decimals" : null,
                "aggregationType" : null,
                "funcBody" : null,
                "usePostProcessing" : null,
                "postFuncBody" : null
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              },
              "latestDataKeys" : [ {
                "name" : "minMoistureThreshold",
                "type" : "attribute",
                "label" : "minMoistureThreshold",
                "color" : "#f44336",
                "settings" : {
                  "__thresholdKey" : true
                },
                "_hash" : 0.30616283218066975
              }, {
                "name" : "maxMoistureThreshold",
                "type" : "attribute",
                "label" : "maxMoistureThreshold",
                "color" : "#ffc107",
                "settings" : {
                  "__thresholdKey" : true
                },
                "_hash" : 0.6910259517980766
              } ]
            } ],
            "timewindow" : {
              "hideAggregation" : false,
              "hideAggInterval" : false,
              "hideTimezone" : false,
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 0,
                "timewindowMs" : 604800000,
                "quickInterval" : "CURRENT_DAY",
                "interval" : 1800000
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 50000
              },
              "timezone" : null
            },
            "showTitle" : false,
            "backgroundColor" : "rgba(0, 0, 0, 0)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "comparisonEnabled" : false,
              "timeForComparison" : "previousInterval",
              "comparisonCustomIntervalValue" : 7200000,
              "comparisonXAxis" : {
                "show" : true,
                "label" : "",
                "labelFont" : {
                  "family" : "Roboto",
                  "size" : 12,
                  "sizeUnit" : "px",
                  "style" : "normal",
                  "weight" : "600",
                  "lineHeight" : "1"
                },
                "labelColor" : "rgba(0, 0, 0, 0.54)",
                "position" : "top",
                "showTickLabels" : true,
                "tickLabelFont" : {
                  "family" : "Roboto",
                  "size" : 10,
                  "sizeUnit" : "px",
                  "style" : "normal",
                  "weight" : "400",
                  "lineHeight" : "1"
                },
                "tickLabelColor" : "rgba(0, 0, 0, 0.54)",
                "ticksFormat" : { },
                "showTicks" : true,
                "ticksColor" : "rgba(0, 0, 0, 0.54)",
                "showLine" : true,
                "lineColor" : "rgba(0, 0, 0, 0.54)",
                "showSplitLines" : true,
                "splitLinesColor" : "rgba(0, 0, 0, 0.12)"
              },
              "yAxes" : {
                "default" : {
                  "units" : "%",
                  "decimals" : null,
                  "show" : true,
                  "label" : "",
                  "labelFont" : {
                    "family" : "Roboto",
                    "size" : 12,
                    "sizeUnit" : "px",
                    "style" : "normal",
                    "weight" : "600",
                    "lineHeight" : "1"
                  },
                  "labelColor" : "rgba(0, 0, 0, 0.54)",
                  "position" : "right",
                  "showTickLabels" : true,
                  "tickLabelFont" : {
                    "family" : "Roboto",
                    "size" : 12,
                    "sizeUnit" : "px",
                    "style" : "normal",
                    "weight" : "400",
                    "lineHeight" : "1"
                  },
                  "tickLabelColor" : "#868D9C",
                  "ticksFormatter" : null,
                  "showTicks" : false,
                  "ticksColor" : "rgba(0, 0, 0, 0.54)",
                  "showLine" : false,
                  "lineColor" : "rgba(0, 0, 0, 0.54)",
                  "showSplitLines" : true,
                  "splitLinesColor" : "rgba(0, 0, 0, 0.12)",
                  "id" : "default",
                  "order" : 0,
                  "min" : null,
                  "max" : null,
                  "ticksGenerator" : null,
                  "interval" : null,
                  "splitNumber" : null
                }
              },
              "thresholds" : [ {
                "type" : "latestKey",
                "yAxisId" : "default",
                "units" : "%",
                "decimals" : null,
                "lineColor" : "#FF6707",
                "lineType" : "solid",
                "lineWidth" : 2,
                "startSymbol" : "none",
                "startSymbolSize" : 5,
                "endSymbol" : "arrow",
                "endSymbolSize" : 5,
                "showLabel" : true,
                "labelPosition" : "insideEndTop",
                "labelFont" : {
                  "size" : 12,
                  "family" : "Roboto",
                  "weight" : "500",
                  "style" : "normal"
                },
                "labelColor" : "rgb(255, 255, 255)",
                "enableLabelBackground" : true,
                "labelBackground" : "#FF6707",
                "latestKey" : "minMoistureThreshold",
                "latestKeyType" : "attribute"
              }, {
                "type" : "latestKey",
                "yAxisId" : "default",
                "units" : "%",
                "decimals" : null,
                "lineColor" : "#FF6707",
                "lineType" : "solid",
                "lineWidth" : 2,
                "startSymbol" : "none",
                "startSymbolSize" : 5,
                "endSymbol" : "arrow",
                "endSymbolSize" : 5,
                "showLabel" : true,
                "labelPosition" : "insideEndTop",
                "labelFont" : {
                  "size" : 12,
                  "family" : "Roboto",
                  "weight" : "500",
                  "style" : "normal"
                },
                "labelColor" : "rgb(255, 255, 255)",
                "enableLabelBackground" : true,
                "labelBackground" : "#FF6707",
                "latestKey" : "maxMoistureThreshold",
                "latestKeyType" : "attribute"
              } ],
              "dataZoom" : false,
              "stack" : false,
              "grid" : {
                "show" : false,
                "backgroundColor" : null,
                "borderWidth" : 1,
                "borderColor" : "#ccc"
              },
              "xAxis" : {
                "show" : true,
                "label" : "",
                "labelFont" : {
                  "family" : "Roboto",
                  "size" : 12,
                  "sizeUnit" : "px",
                  "style" : "normal",
                  "weight" : "600",
                  "lineHeight" : "1"
                },
                "labelColor" : "rgba(0, 0, 0, 0.54)",
                "position" : "bottom",
                "showTickLabels" : true,
                "tickLabelFont" : {
                  "family" : "Roboto",
                  "size" : 10,
                  "sizeUnit" : "px",
                  "style" : "normal",
                  "weight" : "400",
                  "lineHeight" : "1"
                },
                "tickLabelColor" : "#868D9C",
                "ticksFormat" : { },
                "showTicks" : false,
                "ticksColor" : "rgba(0, 0, 0, 0.54)",
                "showLine" : false,
                "lineColor" : "rgba(0, 0, 0, 0.54)",
                "showSplitLines" : false,
                "splitLinesColor" : "rgba(0, 0, 0, 0.12)"
              },
              "noAggregationBarWidthSettings" : {
                "strategy" : "group",
                "groupWidth" : {
                  "relative" : true,
                  "relativeWidth" : 2,
                  "absoluteWidth" : 1000
                },
                "barWidth" : {
                  "relative" : true,
                  "relativeWidth" : 2,
                  "absoluteWidth" : 1000
                }
              },
              "showLegend" : false,
              "legendLabelFont" : {
                "family" : "Roboto",
                "size" : 12,
                "sizeUnit" : "px",
                "style" : "normal",
                "weight" : "400",
                "lineHeight" : "16px"
              },
              "legendLabelColor" : "#868D9C",
              "legendConfig" : {
                "direction" : "column",
                "position" : "top",
                "sortDataKeys" : false,
                "showMin" : false,
                "showMax" : false,
                "showAvg" : false,
                "showTotal" : false,
                "showLatest" : false
              },
              "showTooltip" : true,
              "tooltipTrigger" : "axis",
              "tooltipValueFont" : {
                "family" : "Roboto",
                "size" : 12,
                "sizeUnit" : "px",
                "style" : "normal",
                "weight" : "500",
                "lineHeight" : "16px"
              },
              "tooltipValueColor" : "rgba(0, 0, 0, 0.76)",
              "tooltipValueFormatter" : null,
              "tooltipShowDate" : true,
              "tooltipDateFormat" : {
                "format" : null,
                "lastUpdateAgo" : false,
                "custom" : false,
                "auto" : true,
                "autoDateFormatSettings" : {
                  "millisecond" : "MMM dd yyyy HH:mm:ss"
                }
              },
              "tooltipDateFont" : {
                "family" : "Roboto",
                "size" : 11,
                "sizeUnit" : "px",
                "style" : "normal",
                "weight" : "400",
                "lineHeight" : "16px"
              },
              "tooltipDateColor" : "rgba(0, 0, 0, 0.76)",
              "tooltipDateInterval" : false,
              "tooltipBackgroundColor" : "rgba(255, 255, 255, 0.76)",
              "tooltipBackgroundBlur" : 4,
              "animation" : {
                "animation" : true,
                "animationThreshold" : 2000,
                "animationDuration" : 500,
                "animationEasing" : "cubicOut",
                "animationDelay" : 0,
                "animationDurationUpdate" : 300,
                "animationEasingUpdate" : "cubicOut",
                "animationDelayUpdate" : 0
              },
              "background" : {
                "type" : "color",
                "color" : "#fff",
                "overlay" : {
                  "enabled" : false,
                  "color" : "rgba(255,255,255,0.72)",
                  "blur" : 3
                }
              },
              "padding" : "0"
            },
            "title" : "Statistics",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "titleStyle" : null,
            "mobileHeight" : 4,
            "configMode" : "basic",
            "actions" : { },
            "showTitleIcon" : false,
            "titleIcon" : "thermostat",
            "iconColor" : "#1F6BDD",
            "useDashboardTimewindow" : false,
            "displayTimewindow" : true,
            "titleFont" : {
              "size" : 16,
              "sizeUnit" : "px",
              "family" : "Roboto",
              "weight" : "400",
              "style" : "normal",
              "lineHeight" : "24px"
            },
            "titleColor" : null,
            "titleTooltip" : "",
            "widgetStyle" : { },
            "widgetCss" : "",
            "pageSize" : 1024,
            "units" : "",
            "decimals" : null,
            "noDataDisplayMessage" : "",
            "timewindowStyle" : {
              "showIcon" : true,
              "iconSize" : "24px",
              "icon" : "query_builder",
              "iconPosition" : "left",
              "font" : {
                "size" : 12,
                "sizeUnit" : "px",
                "family" : "Roboto",
                "weight" : "400",
                "style" : "normal",
                "lineHeight" : "16px"
              },
              "color" : "rgba(0, 0, 0, 0.38)",
              "displayTypePrefix" : true
            },
            "margin" : "0px",
            "borderRadius" : "",
            "iconSize" : "0px",
            "enableDataExport" : false,
            "mobileOrder" : 0
          },
          "row" : 0,
          "col" : 0,
          "id" : "f99ce7c5-d0b0-0292-d803-78aba8ba3b31"
        },
        "ab2926f2-5761-a169-3ea7-1f130419c7ac" : {
          "typeFullFqn" : "system.cards.timeseries_table",
          "type" : "timeseries",
          "sizeX" : 8,
          "sizeY" : 6.5,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : "",
              "entityAliasId" : "39927380-423a-872a-0843-de34f99264ad",
              "filterId" : null,
              "dataKeys" : [ {
                "name" : "schedulerEvents",
                "type" : "timeseries",
                "label" : "Name",
                "color" : "#2196f3",
                "settings" : {
                  "useCellStyleFunction" : true,
                  "cellStyleFunction" : "return {\n    fontWeight: 600\n};",
                  "useCellContentFunction" : true,
                  "useCellContentFunctionOnExport" : true,
                  "cellContentFunction" : "return value ? '<span style=\"background: rgba(111, 116, 242, 0.08); border-radius: 16px; padding: 4px 8px; color: #5553AF;\">'+value+'</span>' : '';",
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled",
                  "columnExportOption" : "onlyVisible"
                },
                "_hash" : 0.6287914158062569,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : true,
                "postFuncBody" : "if (value){\n    if(JSON.parse(value) && JSON.parse(value).name){\n        return JSON.parse(value)['name'];\n    } return value;\n} return value;"
              }, {
                "name" : "schedulerEvents",
                "type" : "timeseries",
                "label" : "Start day",
                "color" : "#4caf50",
                "settings" : { },
                "_hash" : 0.6565841065056661,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : true,
                "postFuncBody" : "if (value){\n    if(JSON.parse(value) && JSON.parse(value).name){\n        return JSON.parse(value)['startDay'];\n    } return value;\n} return value;"
              }, {
                "name" : "schedulerEvents",
                "type" : "timeseries",
                "label" : "Start time",
                "color" : "#f44336",
                "settings" : {
                  "useCellStyleFunction" : true,
                  "cellStyleFunction" : "return {\n    fontWeight: 600\n};",
                  "useCellContentFunction" : true,
                  "useCellContentFunctionOnExport" : true,
                  "cellContentFunction" : "return value ? '<span style=\"background: rgba(111, 116, 242, 0.08); border-radius: 16px; padding: 4px 8px; color: #5553AF;\">'+value+'</span>' : '';",
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled",
                  "columnExportOption" : "onlyVisible"
                },
                "_hash" : 0.724844479089038,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : true,
                "postFuncBody" : "if (value){\n    if(JSON.parse(value) && JSON.parse(value).name){\n        return JSON.parse(value)['startTime'];\n    } return value;\n} return value;"
              }, {
                "name" : "schedulerEvents",
                "type" : "timeseries",
                "label" : "Repeat",
                "color" : "#ffc107",
                "settings" : { },
                "_hash" : 0.42694014162673777,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : true,
                "postFuncBody" : "if (value){\n    if(JSON.parse(value) && JSON.parse(value).name){\n        return JSON.parse(value)['repeat'];\n    } return value;\n} return value;"
              }, {
                "name" : "schedulerEvents",
                "type" : "timeseries",
                "label" : "End day",
                "color" : "#607d8b",
                "settings" : { },
                "_hash" : 0.2319499178081601,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : true,
                "postFuncBody" : "if (value){\n    if(JSON.parse(value) && JSON.parse(value).name){\n        return JSON.parse(value)['endDay'];\n    } return value;\n} return value;"
              }, {
                "name" : "schedulerEvents",
                "type" : "timeseries",
                "label" : "Duration",
                "color" : "#9c27b0",
                "settings" : {
                  "useCellStyleFunction" : true,
                  "cellStyleFunction" : "return {\n    fontWeight: 600\n};",
                  "useCellContentFunction" : true,
                  "useCellContentFunctionOnExport" : true,
                  "cellContentFunction" : "return value ? '<span style=\"background: rgba(111, 116, 242, 0.08); border-radius: 16px; padding: 4px 8px; color: #5553AF;\">'+value+'</span>' : '';",
                  "defaultColumnVisibility" : "visible",
                  "columnSelectionToDisplay" : "enabled",
                  "columnExportOption" : "onlyVisible"
                },
                "_hash" : 0.9266960299887279,
                "aggregationType" : null,
                "units" : null,
                "decimals" : null,
                "funcBody" : null,
                "usePostProcessing" : true,
                "postFuncBody" : "if (value){\n    if(JSON.parse(value) && JSON.parse(value).name){\n        return JSON.parse(value)['duration'];\n    } return value;\n} return value;"
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              },
              "latestDataKeys" : null
            } ],
            "timewindow" : {
              "hideAggregation" : false,
              "hideAggInterval" : false,
              "hideTimezone" : false,
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 0,
                "interval" : 2592000000,
                "timewindowMs" : 838080000000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1730367918233,
                  "endTimeMs" : 1730454318233
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "backgroundColor" : "rgb(255, 255, 255)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "8px",
            "settings" : {
              "enableSearch" : true,
              "enableSelectColumnDisplay" : true,
              "enableStickyHeader" : true,
              "enableStickyAction" : true,
              "showCellActionsMenu" : true,
              "reserveSpaceForHiddenAction" : "true",
              "showTimestamp" : false,
              "dateFormat" : {
                "format" : "yyyy-MM-dd HH:mm:ss"
              },
              "timestampExportOption" : "onlyVisible",
              "displayPagination" : true,
              "useEntityLabel" : false,
              "defaultPageSize" : 10,
              "hideEmptyLines" : false,
              "disableStickyHeader" : false,
              "useRowStyleFunction" : false,
              "rowStyleFunction" : ""
            },
            "title" : "Irrigation schedule",
            "dropShadow" : true,
            "enableFullscreen" : false,
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400,
              "padding" : "5px 10px 5px 10px"
            },
            "useDashboardTimewindow" : false,
            "showLegend" : false,
            "widgetStyle" : { },
            "actions" : { },
            "showTitleIcon" : false,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "displayTimewindow" : false,
            "configMode" : "advanced",
            "titleFont" : null,
            "titleColor" : null,
            "titleIcon" : null,
            "enableDataExport" : false,
            "titleTooltip" : "",
            "widgetCss" : "",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "row" : 0,
          "col" : 0,
          "id" : "ab2926f2-5761-a169-3ea7-1f130419c7ac"
        },
        "d20e83c8-af5c-a342-efac-cbc31bf47660" : {
          "type" : "latest",
          "sizeX" : 5,
          "sizeY" : 3.5,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : null,
              "entityAliasId" : "61ca5437-6539-88f4-4f59-a9508eefdf1e",
              "filterId" : null,
              "dataKeys" : [ ]
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1668004676539,
                  "endTimeMs" : 1668091076539
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : false,
            "backgroundColor" : "#fff",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "useMarkdownTextFunction" : false,
              "markdownTextPattern" : "<div class=\"main-layout\" style=\"width: 100%;\" fxLayout=\"column\">\n    <tb-dashboard-state \n        style=\"height: 160px; width: 100%;\"\n        [ctx]=\"ctx\"\n        stateId=\"moisture_sensor_details_brief\"\n        [entityId]=\"{ entityType: 'DEVICE', id: '${entityId}' }\"> \n    </tb-dashboard-state>\n    <mat-expansion-panel id=\"${entityId}\" class=\"tb-settings\" \n         (expandedChange)=\"showDetails = $event; ctx.popoverComponent?.resize($event ? '400px' : '300px', $event ? '570px' : '250px', 200)\">\n        <mat-expansion-panel-header fxLayout=\"row wrap\">\n            <mat-panel-description fxLayoutAlign=\"end center\">\n                View details\n            </mat-panel-description>\n        </mat-expansion-panel-header>\n        <ng-template matExpansionPanelContent>\n            <div style=\"height: 80px; width: 100%;\">\n                <tb-dashboard-state \n                    *ngIf=\"showDetails\"\n                    style=\"height: 100%; width: 100%;\"\n                    [ctx]=\"ctx\"\n                    stateId=\"moisture_sensor_details_alarms\"\n                    [entityId]=\"{ entityType: 'DEVICE', id: '${entityId}' }\">\n                </tb-dashboard-state>\n            </div>\n            <div style=\"height: 200px; width: 100%;\">\n                <tb-dashboard-state \n                    *ngIf=\"showDetails\"\n                    style=\"height: 100%; width: 100%;\"\n                    [ctx]=\"ctx\"\n                    stateId=\"moisture_sensor_details_moisture\"\n                    [entityId]=\"{ entityType: 'DEVICE', id: '${entityId}' }\">\n                </tb-dashboard-state>\n            </div>\n        </ng-template>\n    </mat-expansion-panel>\n</div>",
              "applyDefaultMarkdownStyle" : true,
              "markdownCss" : ".tb-markdown-view .tb-progress-cover, .tb-markdown-view .mat-drawer-container {\n    background-color: #fff !important;\n}\n\n.tb-markdown-view {\n    overflow: hidden !important;\n}\n\n.tb-markdown-view > div {\n    padding: 0;\n}\n"
            },
            "title" : "New Markdown/HTML Card",
            "showTitleIcon" : false,
            "iconColor" : "rgba(0, 0, 0, 0.87)",
            "iconSize" : "24px",
            "titleTooltip" : "",
            "dropShadow" : false,
            "enableFullscreen" : false,
            "widgetStyle" : { },
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 400
            },
            "showLegend" : false,
            "useDashboardTimewindow" : true,
            "enableDataExport" : false,
            "widgetCss" : ".tb-widget-container > .tb-widget {\n    border-radius: 0px;\n    box-shadow: none;\n}\n\n.tb-markdown-view .tb-progress-cover, .tb-markdown-view .mat-drawer-container {\n    background-color: #fff !important;\n}\n\n.mat-expansion-panel.tb-settings {\n    box-shadow: none;\n}\n\n.mat-expansion-panel.tb-settings .mat-content {\n    overflow: visible;\n}\n\n.mat-expansion-panel.tb-settings .mat-expansion-panel-header {\n    padding: 0;\n}\n\n.mat-expansion-panel.tb-settings .mat-expansion-panel-header:hover {\n    background: none;\n}\n\n.mat-expansion-panel.tb-settings .mat-expansion-panel-header .mat-expansion-indicator {\n    padding: 2px;\n}\n\n.mat-expansion-panel.tb-settings .mat-expansion-panel-header-description {\n    align-items: center;\n    font-weight: 600;\n    font-size: 13px;\n    margin-right: 8px;\n}\n\n.mat-expansion-panel.tb-settings .mat-expansion-panel-header .mat-expansion-indicator:after, .mat-expansion-panel.tb-settings .mat-expansion-panel-header-description {\n    color: #5553AF;\n}\n\n.mat-expansion-panel.tb-settings .mat-expansion-panel-header .mat-expansion-indicator {\n    padding: 0 2px;\n    font-size: 13px;\n}\n\n.mat-expansion-panel.tb-settings .mat-expansion-panel-header .mat-expansion-indicator:after {\n    vertical-align: baseline;\n}\n\n.mat-expansion-panel.tb-settings > .mat-expansion-panel-content > .mat-expansion-panel-body {\n    padding: 0;\n}\n\n.mat-expansion-panel .mat-expansion-panel-content { \n    font: inherit;\n}\n\ndiv.tb-widget .tb-timewindow.no-padding {\n    padding: 0 8px;\n    border: 1px solid rgba(0, 0, 0, 0.08);\n    border-radius: 8px;\n    color: #868D9C;\n    font-weight: 400;\n    font-size: 12px;\n}\n\n.tb-timewindow .mat-icon-button {\n    width: 18px;\n    line-height: 18px;\n    height: 18px;\n    margin-right: 4px;\n}\n\n.tb-timewindow .mat-icon-button .mat-icon {\n    width: 15px;\n    font-size: 15px;\n    line-height: 15px;\n    height: 15px;\n}",
            "pageSize" : 1024,
            "noDataDisplayMessage" : ""
          },
          "row" : 0,
          "col" : 0,
          "id" : "d20e83c8-af5c-a342-efac-cbc31bf47660",
          "typeFullFqn" : "system.cards.markdown_card"
        },
        "83c67c0a-e6f6-0a54-460f-7a457384a210" : {
          "typeFullFqn" : "system.line_chart",
          "type" : "timeseries",
          "sizeX" : 8,
          "sizeY" : 5,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "name" : "",
              "deviceId" : "d8969750-c316-11f0-93ad-355a87ef80c4",
              "entityAliasId" : "264356aa-f5f0-6605-d246-750736edf5c6",
              "dataKeys" : [ {
                "name" : "temperature",
                "type" : "timeseries",
                "label" : "temperature",
                "color" : "#2196f3",
                "settings" : {
                  "yAxisId" : "default",
                  "showInLegend" : true,
                  "dataHiddenByDefault" : false,
                  "type" : "line",
                  "lineSettings" : {
                    "showLine" : true,
                    "step" : false,
                    "stepType" : "start",
                    "smooth" : false,
                    "lineType" : "solid",
                    "lineWidth" : 2,
                    "showPoints" : false,
                    "showPointLabel" : false,
                    "pointLabelPosition" : "top",
                    "pointLabelFont" : {
                      "family" : "Roboto",
                      "size" : 11,
                      "sizeUnit" : "px",
                      "style" : "normal",
                      "weight" : "400",
                      "lineHeight" : "1"
                    },
                    "pointLabelColor" : "rgba(0, 0, 0, 0.76)",
                    "enablePointLabelBackground" : false,
                    "pointLabelBackground" : "rgba(255,255,255,0.56)",
                    "pointShape" : "emptyCircle",
                    "pointSize" : 4,
                    "fillAreaSettings" : {
                      "type" : "none",
                      "opacity" : 0.4,
                      "gradient" : {
                        "start" : 100,
                        "end" : 0
                      }
                    }
                  },
                  "barSettings" : {
                    "showBorder" : false,
                    "borderWidth" : 2,
                    "borderRadius" : 0,
                    "showLabel" : false,
                    "labelPosition" : "top",
                    "labelFont" : {
                      "family" : "Roboto",
                      "size" : 11,
                      "sizeUnit" : "px",
                      "style" : "normal",
                      "weight" : "400",
                      "lineHeight" : "1"
                    },
                    "labelColor" : "rgba(0, 0, 0, 0.76)",
                    "enableLabelBackground" : false,
                    "labelBackground" : "rgba(255,255,255,0.56)",
                    "backgroundSettings" : {
                      "type" : "none",
                      "opacity" : 0.4,
                      "gradient" : {
                        "start" : 100,
                        "end" : 0
                      }
                    }
                  },
                  "comparisonSettings" : {
                    "showValuesForComparison" : false,
                    "comparisonValuesLabel" : "",
                    "color" : ""
                  }
                },
                "_hash" : 0.3999049739921582,
                "units" : "°C",
                "decimals" : 0
              }, {
                "name" : "humidity",
                "type" : "timeseries",
                "label" : "humidity",
                "color" : "#4caf50",
                "settings" : {
                  "yAxisId" : "default",
                  "showInLegend" : true,
                  "dataHiddenByDefault" : false,
                  "type" : "line",
                  "lineSettings" : {
                    "showLine" : true,
                    "step" : false,
                    "stepType" : "start",
                    "smooth" : false,
                    "lineType" : "solid",
                    "lineWidth" : 2,
                    "showPoints" : false,
                    "showPointLabel" : false,
                    "pointLabelPosition" : "top",
                    "pointLabelFont" : {
                      "family" : "Roboto",
                      "size" : 11,
                      "sizeUnit" : "px",
                      "style" : "normal",
                      "weight" : "400",
                      "lineHeight" : "1"
                    },
                    "pointLabelColor" : "rgba(0, 0, 0, 0.76)",
                    "enablePointLabelBackground" : false,
                    "pointLabelBackground" : "rgba(255,255,255,0.56)",
                    "pointShape" : "emptyCircle",
                    "pointSize" : 4,
                    "fillAreaSettings" : {
                      "type" : "none",
                      "opacity" : 0.4,
                      "gradient" : {
                        "start" : 100,
                        "end" : 0
                      }
                    }
                  },
                  "barSettings" : {
                    "showBorder" : false,
                    "borderWidth" : 2,
                    "borderRadius" : 0,
                    "showLabel" : false,
                    "labelPosition" : "top",
                    "labelFont" : {
                      "family" : "Roboto",
                      "size" : 11,
                      "sizeUnit" : "px",
                      "style" : "normal",
                      "weight" : "400",
                      "lineHeight" : "1"
                    },
                    "labelColor" : "rgba(0, 0, 0, 0.76)",
                    "enableLabelBackground" : false,
                    "labelBackground" : "rgba(255,255,255,0.56)",
                    "backgroundSettings" : {
                      "type" : "none",
                      "opacity" : 0.4,
                      "gradient" : {
                        "start" : 100,
                        "end" : 0
                      }
                    }
                  },
                  "comparisonSettings" : {
                    "showValuesForComparison" : false,
                    "comparisonValuesLabel" : "",
                    "color" : ""
                  }
                },
                "_hash" : 0.8625317251320239,
                "decimals" : 0
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              },
              "latestDataKeys" : [ ]
            } ],
            "timewindow" : {
              "hideAggregation" : false,
              "hideAggInterval" : false,
              "hideTimezone" : false,
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 0,
                "interval" : 1800000,
                "timewindowMs" : 604800000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1765665251848,
                  "endTimeMs" : 1765751651848
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              },
              "timezone" : null
            },
            "showTitle" : true,
            "backgroundColor" : "rgba(0, 0, 0, 0)",
            "color" : "rgba(0, 0, 0, 0.87)",
            "padding" : "0px",
            "settings" : {
              "showLegend" : true,
              "legendConfig" : {
                "direction" : "column",
                "position" : "top",
                "sortDataKeys" : false,
                "showMin" : false,
                "showMax" : false,
                "showAvg" : false,
                "showTotal" : false,
                "showLatest" : true
              },
              "thresholds" : [ ],
              "dataZoom" : true,
              "stack" : false,
              "yAxis" : {
                "show" : true,
                "label" : "",
                "labelFont" : {
                  "family" : "Roboto",
                  "size" : 12,
                  "sizeUnit" : "px",
                  "style" : "normal",
                  "weight" : "600",
                  "lineHeight" : "1"
                },
                "labelColor" : "rgba(0, 0, 0, 0.54)",
                "position" : "left",
                "showTickLabels" : true,
                "tickLabelFont" : {
                  "family" : "Roboto",
                  "size" : 12,
                  "sizeUnit" : "px",
                  "style" : "normal",
                  "weight" : "400",
                  "lineHeight" : "1"
                },
                "tickLabelColor" : "rgba(0, 0, 0, 0.54)",
                "showTicks" : true,
                "ticksColor" : "rgba(0, 0, 0, 0.54)",
                "showLine" : true,
                "lineColor" : "rgba(0, 0, 0, 0.54)",
                "showSplitLines" : true,
                "splitLinesColor" : "rgba(0, 0, 0, 0.12)"
              },
              "xAxis" : {
                "show" : true,
                "label" : "",
                "labelFont" : {
                  "family" : "Roboto",
                  "size" : 12,
                  "sizeUnit" : "px",
                  "style" : "normal",
                  "weight" : "600",
                  "lineHeight" : "1"
                },
                "labelColor" : "rgba(0, 0, 0, 0.54)",
                "position" : "bottom",
                "showTickLabels" : true,
                "tickLabelFont" : {
                  "family" : "Roboto",
                  "size" : 10,
                  "sizeUnit" : "px",
                  "style" : "normal",
                  "weight" : "400",
                  "lineHeight" : "1"
                },
                "tickLabelColor" : "rgba(0, 0, 0, 0.54)",
                "ticksFormat" : { },
                "showTicks" : true,
                "ticksColor" : "rgba(0, 0, 0, 0.54)",
                "showLine" : true,
                "lineColor" : "rgba(0, 0, 0, 0.54)",
                "showSplitLines" : true,
                "splitLinesColor" : "rgba(0, 0, 0, 0.12)"
              },
              "legendLabelFont" : {
                "family" : "Roboto",
                "size" : 12,
                "sizeUnit" : "px",
                "style" : "normal",
                "weight" : "400",
                "lineHeight" : "16px"
              },
              "legendLabelColor" : "rgba(0, 0, 0, 0.76)",
              "showTooltip" : true,
              "tooltipTrigger" : "axis",
              "tooltipValueFont" : {
                "family" : "Roboto",
                "size" : 12,
                "sizeUnit" : "px",
                "style" : "normal",
                "weight" : "500",
                "lineHeight" : "16px"
              },
              "tooltipValueColor" : "rgba(0, 0, 0, 0.76)",
              "tooltipShowDate" : true,
              "tooltipDateFormat" : {
                "format" : null,
                "lastUpdateAgo" : false,
                "custom" : false,
                "auto" : true,
                "autoDateFormatSettings" : { }
              },
              "tooltipDateFont" : {
                "family" : "Roboto",
                "size" : 11,
                "sizeUnit" : "px",
                "style" : "normal",
                "weight" : "400",
                "lineHeight" : "16px"
              },
              "tooltipDateColor" : "rgba(0, 0, 0, 0.76)",
              "tooltipDateInterval" : true,
              "tooltipBackgroundColor" : "rgba(255, 255, 255, 0.76)",
              "tooltipBackgroundBlur" : 4,
              "background" : {
                "type" : "color",
                "color" : "#fff",
                "overlay" : {
                  "enabled" : false,
                  "color" : "rgba(255,255,255,0.72)",
                  "blur" : 3
                }
              },
              "yAxes" : {
                "default" : {
                  "units" : null,
                  "decimals" : 0,
                  "show" : true,
                  "label" : "",
                  "labelFont" : {
                    "family" : "Roboto",
                    "size" : 12,
                    "sizeUnit" : "px",
                    "style" : "normal",
                    "weight" : "600",
                    "lineHeight" : "1"
                  },
                  "labelColor" : "rgba(0, 0, 0, 0.54)",
                  "position" : "left",
                  "showTickLabels" : true,
                  "tickLabelFont" : {
                    "family" : "Roboto",
                    "size" : 12,
                    "sizeUnit" : "px",
                    "style" : "normal",
                    "weight" : "400",
                    "lineHeight" : "1"
                  },
                  "tickLabelColor" : "rgba(0, 0, 0, 0.54)",
                  "ticksFormatter" : null,
                  "showTicks" : true,
                  "ticksColor" : "rgba(0, 0, 0, 0.54)",
                  "showLine" : true,
                  "lineColor" : "rgba(0, 0, 0, 0.54)",
                  "showSplitLines" : true,
                  "splitLinesColor" : "rgba(0, 0, 0, 0.12)",
                  "id" : "default",
                  "order" : 0
                }
              },
              "noAggregationBarWidthSettings" : {
                "strategy" : "group",
                "groupWidth" : {
                  "relative" : true,
                  "relativeWidth" : 2,
                  "absoluteWidth" : 1000
                },
                "barWidth" : {
                  "relative" : true,
                  "relativeWidth" : 2,
                  "absoluteWidth" : 1000
                }
              },
              "animation" : {
                "animation" : true,
                "animationThreshold" : 2000,
                "animationDuration" : 500,
                "animationEasing" : "cubicOut",
                "animationDelay" : 0,
                "animationDurationUpdate" : 300,
                "animationEasingUpdate" : "cubicOut",
                "animationDelayUpdate" : 0
              },
              "padding" : "12px",
              "comparisonEnabled" : false,
              "timeForComparison" : "previousInterval",
              "comparisonCustomIntervalValue" : 7200000,
              "comparisonXAxis" : {
                "show" : true,
                "label" : "",
                "labelFont" : {
                  "family" : "Roboto",
                  "size" : 12,
                  "sizeUnit" : "px",
                  "style" : "normal",
                  "weight" : "600",
                  "lineHeight" : "1"
                },
                "labelColor" : "rgba(0, 0, 0, 0.54)",
                "position" : "top",
                "showTickLabels" : true,
                "tickLabelFont" : {
                  "family" : "Roboto",
                  "size" : 10,
                  "sizeUnit" : "px",
                  "style" : "normal",
                  "weight" : "400",
                  "lineHeight" : "1"
                },
                "tickLabelColor" : "rgba(0, 0, 0, 0.54)",
                "ticksFormat" : { },
                "showTicks" : true,
                "ticksColor" : "rgba(0, 0, 0, 0.54)",
                "showLine" : true,
                "lineColor" : "rgba(0, 0, 0, 0.54)",
                "showSplitLines" : true,
                "splitLinesColor" : "rgba(0, 0, 0, 0.12)"
              },
              "grid" : {
                "show" : false,
                "backgroundColor" : null,
                "borderWidth" : 1,
                "borderColor" : "#ccc"
              },
              "legendColumnTitleFont" : {
                "family" : "Roboto",
                "size" : 12,
                "sizeUnit" : "px",
                "style" : "normal",
                "weight" : "400",
                "lineHeight" : "16px"
              },
              "legendColumnTitleColor" : "rgba(0, 0, 0, 0.38)",
              "legendValueFont" : {
                "family" : "Roboto",
                "size" : 12,
                "sizeUnit" : "px",
                "style" : "normal",
                "weight" : "500",
                "lineHeight" : "16px"
              },
              "legendValueColor" : "rgba(0, 0, 0, 0.87)",
              "tooltipLabelFont" : {
                "family" : "Roboto",
                "size" : 12,
                "sizeUnit" : "px",
                "style" : "normal",
                "weight" : "400",
                "lineHeight" : "16px"
              },
              "tooltipLabelColor" : "rgba(0, 0, 0, 0.76)"
            },
            "title" : "Line chart",
            "dropShadow" : true,
            "enableFullscreen" : true,
            "titleStyle" : null,
            "mobileHeight" : null,
            "configMode" : "basic",
            "actions" : { },
            "showTitleIcon" : false,
            "titleIcon" : "thermostat",
            "iconColor" : "#1F6BDD",
            "useDashboardTimewindow" : false,
            "displayTimewindow" : true,
            "titleFont" : {
              "size" : 16,
              "sizeUnit" : "px",
              "family" : "Roboto",
              "weight" : "500",
              "style" : "normal",
              "lineHeight" : "24px"
            },
            "titleColor" : "rgba(0, 0, 0, 0.87)",
            "titleTooltip" : "",
            "widgetStyle" : { },
            "widgetCss" : "",
            "pageSize" : 1024,
            "units" : "",
            "decimals" : null,
            "noDataDisplayMessage" : "",
            "timewindowStyle" : {
              "showIcon" : false,
              "iconSize" : "24px",
              "icon" : null,
              "iconPosition" : "left",
              "font" : {
                "size" : 12,
                "sizeUnit" : "px",
                "family" : "Roboto",
                "weight" : "400",
                "style" : "normal",
                "lineHeight" : "16px"
              },
              "color" : "rgba(0, 0, 0, 0.38)",
              "displayTypePrefix" : true
            },
            "margin" : "0px",
            "borderRadius" : "0px",
            "iconSize" : "0px"
          },
          "row" : 0,
          "col" : 0,
          "id" : "83c67c0a-e6f6-0a54-460f-7a457384a210"
        },
        "field-stats-widget" : {
          "type" : "latest",
          "sizeX" : 18,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "entityAliasId" : "39927380-423a-872a-0843-de34f99264ad",
              "dataKeys" : [ {
                "name" : "area_hectares",
                "type" : "attribute",
                "label" : "Area",
                "color" : "#2196f3"
              }, {
                "name" : "cropType",
                "type" : "attribute",
                "label" : "Crop",
                "color" : "#4caf50"
              }, {
                "name" : "avgMoisture",
                "type" : "timeseries",
                "label" : "Avg Moisture",
                "color" : "#f44336"
              }, {
                "name" : "criticalAlarmsCount",
                "type" : "attribute",
                "label" : "Critical Alarms",
                "color" : "#d32f2f"
              }, {
                "name" : "majorAlarmsCount",
                "type" : "attribute",
                "label" : "Major Alarms",
                "color" : "#ff9800"
              } ]
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1767314077943,
                  "endTimeMs" : 1767400477943
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "NONE",
                "limit" : 200
              }
            },
            "showTitle" : true,
            "title" : "Field Overview",
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 500
            },
            "backgroundColor" : "#fff",
            "padding" : "16px",
            "settings" : {
              "useMarkdownTextFunction" : true,
              "markdownTextFunction" : "var area = data[0] && data[0]['area_hectares'] ? data[0]['area_hectares'].toFixed(2) + ' ha' : 'N/A';\nvar crop = data[0] && data[0]['cropType'] ? data[0]['cropType'] : 'Not set';\nvar moisture = data[0] && data[0]['avgMoisture'] ? data[0]['avgMoisture'].toFixed(1) + '%' : 'No data';\nvar criticalAlarms = data[0] && data[0]['criticalAlarmsCount'] ? data[0]['criticalAlarmsCount'] : 0;\nvar majorAlarms = data[0] && data[0]['majorAlarmsCount'] ? data[0]['majorAlarmsCount'] : 0;\n\nvar moistureColor = '#4caf50';\nif (data[0] && data[0]['avgMoisture']) {\n    if (data[0]['avgMoisture'] < 20 || data[0]['avgMoisture'] > 80) {\n        moistureColor = '#d32f2f';\n    } else if (data[0]['avgMoisture'] < 30 || data[0]['avgMoisture'] > 70) {\n        moistureColor = '#ff9800';\n    }\n}\n\nreturn '<div style=\"display: flex; gap: 24px; flex-wrap: wrap;\">' +\n    '<div class=\"stat-card\">' +\n        '<div class=\"stat-icon\" style=\"background: #e3f2fd;\"><mat-icon style=\"color: #2196f3;\">terrain</mat-icon></div>' +\n        '<div><div class=\"stat-label\">Area</div><div class=\"stat-value\">' + area + '</div></div>' +\n    '</div>' +\n    '<div class=\"stat-card\">' +\n        '<div class=\"stat-icon\" style=\"background: #e8f5e9;\"><mat-icon style=\"color: #4caf50;\">eco</mat-icon></div>' +\n        '<div><div class=\"stat-label\">Crop Type</div><div class=\"stat-value\">' + crop + '</div></div>' +\n    '</div>' +\n    '<div class=\"stat-card\">' +\n        '<div class=\"stat-icon\" style=\"background: rgba(76, 175, 80, 0.1);\"><mat-icon style=\"color: ' + moistureColor + ';\">opacity</mat-icon></div>' +\n        '<div><div class=\"stat-label\">Avg Moisture</div><div class=\"stat-value\" style=\"color: ' + moistureColor + ';\">' + moisture + '</div></div>' +\n    '</div>' +\n    '<div class=\"stat-card\">' +\n        '<div class=\"stat-icon\" style=\"background: ' + (criticalAlarms > 0 ? '#ffebee' : '#f5f5f5') + ';\"><mat-icon style=\"color: ' + (criticalAlarms > 0 ? '#d32f2f' : '#9e9e9e') + ';\">error</mat-icon></div>' +\n        '<div><div class=\"stat-label\">Critical Alarms</div><div class=\"stat-value\" style=\"color: ' + (criticalAlarms > 0 ? '#d32f2f' : '#9e9e9e') + ';\">' + criticalAlarms + '</div></div>' +\n    '</div>' +\n    '<div class=\"stat-card\">' +\n        '<div class=\"stat-icon\" style=\"background: ' + (majorAlarms > 0 ? '#fff3e0' : '#f5f5f5') + ';\"><mat-icon style=\"color: ' + (majorAlarms > 0 ? '#ff9800' : '#9e9e9e') + ';\">warning</mat-icon></div>' +\n        '<div><div class=\"stat-label\">Major Alarms</div><div class=\"stat-value\" style=\"color: ' + (majorAlarms > 0 ? '#ff9800' : '#9e9e9e') + ';\">' + majorAlarms + '</div></div>' +\n    '</div>' +\n'</div>';"
            },
            "widgetCss" : ".stat-card {\n    display: flex;\n    align-items: center;\n    gap: 12px;\n    padding: 8px 12px;\n    background: #fafafa;\n    border-radius: 8px;\n    min-width: 150px;\n}\n\n.stat-icon {\n    width: 40px;\n    height: 40px;\n    border-radius: 8px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.stat-icon mat-icon {\n    font-size: 24px;\n    width: 24px;\n    height: 24px;\n}\n\n.stat-label {\n    font-size: 11px;\n    color: rgba(0,0,0,0.6);\n    margin-bottom: 2px;\n}\n\n.stat-value {\n    font-size: 18px;\n    font-weight: 600;\n    color: rgba(0,0,0,0.87);\n}",
            "useDashboardTimewindow" : true,
            "dropShadow" : true
          },
          "row" : 0,
          "col" : 0,
          "id" : "field-stats-widget",
          "typeFullFqn" : "system.cards.markdown_card"
        },
        "irrigation-buttons-widget" : {
          "type" : "latest",
          "sizeX" : 14,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1767314077943,
                  "endTimeMs" : 1767400477943
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : true,
            "title" : "Irrigation Control",
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 500
            },
            "backgroundColor" : "#fff",
            "padding" : "16px",
            "settings" : {
              "useMarkdownTextFunction" : true,
              "markdownTextFunction" : "return '';",
              "applyDefaultMarkdownStyle" : false
            },
            "actions" : {
              "headerButton" : [ {
                "name" : "Turn ON",
                "icon" : "power_settings_new",
                "type" : "custom",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\n\nlet fieldParam = widgetContext.stateController.getStateParams().field;\nif (!fieldParam) {\n    console.error('No field parameter');\n    return;\n}\n\nlet fieldEntityId;\ntry {\n    let parsed = typeof fieldParam === 'string' ? JSON.parse(fieldParam) : fieldParam;\n    fieldEntityId = parsed.entityId || parsed;\n} catch (e) {\n    console.error('Error parsing field ID:', e);\n    return;\n}\n\ndialogs.confirm(\n    'Turn Irrigation ON',\n    'Turn on irrigation for this field?',\n    null,\n    'Turn ON',\n    'Cancel'\n).subscribe(function(result) {\n    if (result) {\n        let telemetry = [{\n            ts: Date.now(),\n            values: {\n                irrigationState: 'ON'\n            }\n        }];\n        \n        attributeService.saveEntityTimeseries(fieldEntityId, 'TELEMETRY', telemetry).subscribe(\n            function() {\n                console.log('Irrigation turned ON');\n                widgetContext.updateAliases();\n            },\n            function(error) {\n                console.error('Error:', error);\n            }\n        );\n    }\n});",
                "id" : "btn-on"
              }, {
                "name" : "Turn OFF",
                "icon" : "power_off",
                "type" : "custom",
                "customFunction" : "let $injector = widgetContext.$scope.$injector;\nlet attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\nlet dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\n\nlet fieldParam = widgetContext.stateController.getStateParams().field;\nif (!fieldParam) {\n    console.error('No field parameter');\n    return;\n}\n\nlet fieldEntityId;\ntry {\n    let parsed = typeof fieldParam === 'string' ? JSON.parse(fieldParam) : fieldParam;\n    fieldEntityId = parsed.entityId || parsed;\n} catch (e) {\n    console.error('Error parsing field ID:', e);\n    return;\n}\n\ndialogs.confirm(\n    'Turn Irrigation OFF',\n    'Turn off irrigation for this field?',\n    null,\n    'Turn OFF',\n    'Cancel'\n).subscribe(function(result) {\n    if (result) {\n        let telemetry = [{\n            ts: Date.now(),\n            values: {\n                irrigationState: 'OFF'\n            }\n        }];\n        \n        attributeService.saveEntityTimeseries(fieldEntityId, 'TELEMETRY', telemetry).subscribe(\n            function() {\n                console.log('Irrigation turned OFF');\n                widgetContext.updateAliases();\n            },\n            function(error) {\n                console.error('Error:', error);\n            }\n        );\n    }\n});",
                "id" : "btn-off"
              } ]
            },
            "useDashboardTimewindow" : true,
            "dropShadow" : true,
            "showTitleIcon" : true,
            "titleIcon" : "opacity"
          },
          "row" : 0,
          "col" : 0,
          "id" : "irrigation-buttons-widget",
          "typeFullFqn" : "system.cards.markdown_card"
        },
        "irrigation-status-display" : {
          "type" : "latest",
          "sizeX" : 14,
          "sizeY" : 3,
          "config" : {
            "datasources" : [ {
              "type" : "entity",
              "entityAliasId" : "264356aa-f5f0-6605-d246-750736edf5c6",
              "dataKeys" : [ {
                "name" : "valve_0_status",
                "type" : "timeseries",
                "label" : "valve_0_status",
                "color" : "#2196f3",
                "settings" : { },
                "_hash" : 0.44305895532896933
              } ],
              "alarmFilterConfig" : {
                "statusList" : [ "ACTIVE" ]
              }
            } ],
            "timewindow" : {
              "displayValue" : "",
              "selectedTab" : 0,
              "realtime" : {
                "realtimeType" : 1,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideQuickInterval" : false
              },
              "history" : {
                "historyType" : 0,
                "interval" : 1000,
                "timewindowMs" : 60000,
                "fixedTimewindow" : {
                  "startTimeMs" : 1767314077943,
                  "endTimeMs" : 1767400477943
                },
                "quickInterval" : "CURRENT_DAY",
                "hideInterval" : false,
                "hideLastInterval" : false,
                "hideFixedInterval" : false,
                "hideQuickInterval" : false
              },
              "aggregation" : {
                "type" : "AVG",
                "limit" : 25000
              }
            },
            "showTitle" : true,
            "title" : "Irrigation Status",
            "titleStyle" : {
              "fontSize" : "16px",
              "fontWeight" : 500
            },
            "backgroundColor" : "#fff",
            "padding" : "16px",
            "settings" : {
              "useMarkdownTextFunction" : true,
              "markdownTextPattern" : "# Markdown/HTML card \\n - **Current entity**: **${entityName}**. \\n - **Current value**: **${Random}**.",
              "markdownTextFunction" : "var state = data[0] && data[0]['irrigationState'] ? data[0][\n    'irrigationState'\n] : 'UNKNOWN';\nvar isOn = state === 'ON';\nvar color = isOn ? '#4caf50' : '#9e9e9e';\nvar bgColor = isOn ? 'rgba(76, 175, 80, 0.1)' :\n    'rgba(158, 158, 158, 0.1)';\nvar icon = isOn ? '💧' : '⭕';\n\nreturn '<div style=\"display: flex; align-items: center; justify-content: center; gap: 16px; padding: 24px; background: ' +\n    bgColor + '; border-radius: 12px;\">' +\n    '<span style=\"font-size: 48px;\">' + icon + '</span>' +\n    '<div style=\"text-align: left;\">' +\n    '<div style=\"font-size: 14px; color: rgba(0,0,0,0.6); margin-bottom: 4px;\">Current Status</div>' +\n    '<div style=\"font-size: 36px; font-weight: 700; color: ' +\n    color + ';\">' + state + '</div>' +\n    '</div>' +\n    '</div>';",
              "applyDefaultMarkdownStyle" : false,
              "markdownCss" : ""
            },
            "useDashboardTimewindow" : true,
            "dropShadow" : true,
            "showTitleIcon" : true,
            "titleIcon" : "info",
            "displayTimewindow" : true
          },
          "row" : 0,
          "col" : 0,
          "id" : "irrigation-status-display",
          "typeFullFqn" : "system.cards.markdown_card"
        }
      },
      "states" : {
        "default" : {
          "name" : "Irrigation Management",
          "root" : true,
          "layouts" : {
            "main" : {
              "widgets" : {
                "c5f8412d-2ffb-4c44-7a7f-223ceea08d84" : {
                  "sizeX" : 12,
                  "sizeY" : 12,
                  "row" : 0,
                  "col" : 0,
                  "mobileOrder" : 2,
                  "mobileHeight" : 6
                },
                "8ce15aad-9ab2-55ce-2628-a663814d27b1" : {
                  "sizeX" : 12,
                  "sizeY" : 12,
                  "row" : 0,
                  "col" : 12,
                  "mobileOrder" : 1,
                  "mobileHeight" : 6
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#f9fafe",
                "columns" : 24,
                "margin" : 10,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70,
                "outerMargin" : true,
                "layoutType" : "default"
              }
            }
          }
        },
        "setup_field_polygon" : {
          "name" : "Setup field polygon",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "7cfc3255-f459-6eb9-000e-70fef5afbcdb" : {
                  "sizeX" : 24,
                  "sizeY" : 10,
                  "row" : 0,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#ffffff",
                "columns" : 24,
                "margin" : 0,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : true,
                "mobileRowHeight" : 70,
                "outerMargin" : true,
                "layoutType" : "default"
              }
            }
          }
        },
        "setup_sensor_location" : {
          "name" : "Setup Sensor Location",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "1503181d-ed67-4878-b497-f3809bf73675" : {
                  "sizeX" : 24,
                  "sizeY" : 10,
                  "row" : 0,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#ffffff",
                "columns" : 24,
                "margin" : 0,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : true,
                "mobileRowHeight" : 70,
                "outerMargin" : true,
                "layoutType" : "default"
              }
            }
          }
        },
        "moisture_sensor_details" : {
          "name" : "Moisture sensor details",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "1f66e5cb-041d-1a45-1abf-6f6ae3d91872" : {
                  "sizeX" : 24,
                  "sizeY" : 11,
                  "row" : 0,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#ffffff",
                "columns" : 24,
                "margin" : 0,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : true,
                "mobileRowHeight" : 70,
                "outerMargin" : true,
                "layoutType" : "default"
              }
            }
          }
        },
        "moisture_sensor_details_brief" : {
          "name" : "Moisture sensor details brief",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "b5c71687-c799-9b94-00f1-958cf76f006c" : {
                  "sizeX" : 24,
                  "sizeY" : 9,
                  "row" : 0,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#ffffff",
                "columns" : 24,
                "margin" : 0,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : true,
                "mobileRowHeight" : 70,
                "outerMargin" : true,
                "layoutType" : "default"
              }
            }
          }
        },
        "field_alarms" : {
          "name" : "Field Alarms",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "2dcc4fce-85e4-e67d-4467-7bd38e579c5c" : {
                  "sizeX" : 24,
                  "sizeY" : 11,
                  "row" : 0,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#ffffff",
                "columns" : 24,
                "margin" : 0,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : true,
                "mobileRowHeight" : 70,
                "outerMargin" : true,
                "layoutType" : "default"
              }
            }
          }
        },
        "moisture_sensor_details_moisture" : {
          "name" : "Moisture sensor details moisture",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "f99ce7c5-d0b0-0292-d803-78aba8ba3b31" : {
                  "sizeX" : 24,
                  "sizeY" : 11,
                  "mobileOrder" : 0,
                  "mobileHeight" : 4,
                  "row" : 0,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#ffffff",
                "columns" : 24,
                "margin" : 0,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : true,
                "mobileRowHeight" : 70,
                "outerMargin" : true,
                "layoutType" : "default"
              }
            }
          }
        },
        "moisture_sensor_details_alarms" : {
          "name" : "Moisture sensor details alarms",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "aac826ba-ba9f-7e72-752f-3a0a6b9cddb5" : {
                  "sizeX" : 24,
                  "sizeY" : 9,
                  "row" : 0,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#ffffff",
                "columns" : 24,
                "margin" : 0,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : true,
                "mobileRowHeight" : 70,
                "outerMargin" : true,
                "layoutType" : "default"
              }
            }
          }
        },
        "sensor_alarms" : {
          "name" : "Sensor alarms",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "8923d335-d974-2aaa-8c40-3eafec174a58" : {
                  "sizeX" : 24,
                  "sizeY" : 11,
                  "row" : 0,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#ffffff",
                "columns" : 24,
                "margin" : 0,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : true,
                "mobileRowHeight" : 70,
                "outerMargin" : true,
                "layoutType" : "default"
              }
            }
          }
        },
        "controler_details" : {
          "name" : "Controler details",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "d20e83c8-af5c-a342-efac-cbc31bf47660" : {
                  "sizeX" : 24,
                  "sizeY" : 11,
                  "row" : 0,
                  "col" : 0
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#ffffff",
                "columns" : 24,
                "margin" : 0,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : true,
                "mobileRowHeight" : 70,
                "outerMargin" : true,
                "layoutType" : "default"
              }
            }
          }
        },
        "${entityName}" : {
          "name" : "${entityName}",
          "root" : false,
          "layouts" : {
            "main" : {
              "widgets" : {
                "8fcd3aed-58d0-0cad-cf63-3a08e1be40a9" : {
                  "sizeX" : 32,
                  "sizeY" : 6,
                  "row" : 12,
                  "col" : 0,
                  "mobileOrder" : 5
                },
                "8345be8d-e581-cbf5-3b22-a95bc191063f" : {
                  "sizeX" : 32,
                  "sizeY" : 15,
                  "row" : 21,
                  "col" : 0,
                  "mobileOrder" : 8
                },
                "fd1083dd-fad3-90c3-8eba-8a8fe0f1d93e" : {
                  "sizeX" : 14,
                  "sizeY" : 4,
                  "row" : 5,
                  "col" : 0,
                  "mobileOrder" : 3
                },
                "e18122c8-7973-5206-792a-cfa7f924a7b0" : {
                  "sizeX" : 16,
                  "sizeY" : 15,
                  "row" : 12,
                  "col" : 32,
                  "mobileOrder" : 6
                },
                "aaccdb0d-72ff-9f2c-e4ae-55077480a3e6" : {
                  "sizeX" : 14,
                  "sizeY" : 2,
                  "row" : 0,
                  "col" : 0,
                  "mobileOrder" : 0
                },
                "7dadc15d-b85b-8ef0-5de1-6c23d0acea73" : {
                  "sizeX" : 7,
                  "sizeY" : 4,
                  "mobileOrder" : 4,
                  "mobileHeight" : null,
                  "row" : 27,
                  "col" : 39
                },
                "ab2926f2-5761-a169-3ea7-1f130419c7ac" : {
                  "sizeX" : 16,
                  "sizeY" : 12,
                  "row" : 0,
                  "col" : 32
                },
                "83c67c0a-e6f6-0a54-460f-7a457384a210" : {
                  "sizeX" : 18,
                  "sizeY" : 12,
                  "mobileHeight" : null,
                  "row" : 0,
                  "col" : 14
                },
                "field-stats-widget" : {
                  "sizeX" : 18,
                  "sizeY" : 3,
                  "row" : 18,
                  "col" : 0
                },
                "irrigation-status-display" : {
                  "sizeX" : 31,
                  "sizeY" : 6,
                  "row" : 41,
                  "col" : 11,
                  "mobileOrder" : 0
                },
                "irrigation-buttons-widget" : {
                  "sizeX" : 14,
                  "sizeY" : 3,
                  "row" : 2,
                  "col" : 0,
                  "mobileOrder" : 1
                }
              },
              "gridSettings" : {
                "backgroundColor" : "#f9fafe",
                "columns" : 48,
                "margin" : 10,
                "backgroundSizeMode" : "100%",
                "autoFillHeight" : true,
                "backgroundImageUrl" : null,
                "mobileAutoFillHeight" : false,
                "mobileRowHeight" : 70,
                "outerMargin" : true,
                "layoutType" : "default"
              }
            }
          }
        }
      },
      "entityAliases" : {
        "cd737d26-3068-aae0-d370-c93f8e7e1a00" : {
          "id" : "cd737d26-3068-aae0-d370-c93f8e7e1a00",
          "alias" : "Fields",
          "filter" : {
            "type" : "assetType",
            "resolveMultiple" : true,
            "assetTypes" : [ "SI Field", "ASSET_PROFILE", "irrigation_perimeter" ],
            "assetNameFilter" : ""
          }
        },
        "39927380-423a-872a-0843-de34f99264ad" : {
          "id" : "39927380-423a-872a-0843-de34f99264ad",
          "alias" : "Current field",
          "filter" : {
            "type" : "stateEntity",
            "resolveMultiple" : false,
            "stateEntityParamName" : "field",
            "defaultStateEntity" : null
          }
        },
        "aa55618a-278a-0776-832d-fa1fe5769a2a" : {
          "id" : "aa55618a-278a-0776-832d-fa1fe5769a2a",
          "alias" : "Moisture Sensors",
          "filter" : {
            "type" : "deviceSearchQuery",
            "resolveMultiple" : true,
            "rootStateEntity" : true,
            "stateEntityParamName" : null,
            "defaultStateEntity" : null,
            "rootEntity" : null,
            "direction" : "FROM",
            "maxLevel" : 1,
            "fetchLastLevelOnly" : false,
            "relationType" : null,
            "deviceTypes" : [ "SI Soil Moisture Sensor", "FertiRega LoRa Sensor" ]
          }
        },
        "7473a7a0-136a-63da-f2ca-f249a1336745" : {
          "id" : "7473a7a0-136a-63da-f2ca-f249a1336745",
          "alias" : "Moisture Sensor Field",
          "filter" : {
            "type" : "assetSearchQuery",
            "resolveMultiple" : true,
            "rootStateEntity" : true,
            "stateEntityParamName" : null,
            "defaultStateEntity" : null,
            "rootEntity" : null,
            "direction" : "TO",
            "maxLevel" : 1,
            "fetchLastLevelOnly" : false,
            "relationType" : null,
            "assetTypes" : [ "SI Field" ]
          }
        },
        "61ca5437-6539-88f4-4f59-a9508eefdf1e" : {
          "id" : "61ca5437-6539-88f4-4f59-a9508eefdf1e",
          "alias" : "Current sensor",
          "filter" : {
            "type" : "stateEntity",
            "resolveMultiple" : false,
            "stateEntityParamName" : null,
            "defaultStateEntity" : null
          }
        },
        "d6332461-1bf4-f761-892e-b88e3372db4d" : {
          "id" : "d6332461-1bf4-f761-892e-b88e3372db4d",
          "alias" : "Devices",
          "filter" : {
            "type" : "entityType",
            "resolveMultiple" : true,
            "entityType" : "DEVICE"
          }
        },
        "b1b0b012-4375-7a04-2ced-37868541ca5e" : {
          "id" : "b1b0b012-4375-7a04-2ced-37868541ca5e",
          "alias" : "Current Controler",
          "filter" : {
            "type" : "deviceSearchQuery",
            "resolveMultiple" : true,
            "rootStateEntity" : true,
            "stateEntityParamName" : null,
            "defaultStateEntity" : null,
            "rootEntity" : null,
            "direction" : "FROM",
            "maxLevel" : 1,
            "fetchLastLevelOnly" : false,
            "relationType" : "Contains",
            "deviceTypes" : [ "FertiRega LoRa Sensor" ]
          }
        },
        "05e38798-2c3d-153b-82b5-7b9eae103d26" : {
          "id" : "05e38798-2c3d-153b-82b5-7b9eae103d26",
          "alias" : "perimeterDevices",
          "filter" : {
            "type" : "relationsQuery",
            "resolveMultiple" : true,
            "rootStateEntity" : false,
            "stateEntityParamName" : null,
            "defaultStateEntity" : null,
            "rootEntity" : {
              "entityType" : "DEVICE",
              "id" : "d8969750-c316-11f0-93ad-355a87ef80c4"
            },
            "direction" : "FROM",
            "maxLevel" : 1,
            "fetchLastLevelOnly" : false,
            "filters" : [ {
              "relationType" : "Contains",
              "entityTypes" : [ "DEVICE" ]
            } ]
          }
        },
        "264356aa-f5f0-6605-d246-750736edf5c6" : {
          "id" : "264356aa-f5f0-6605-d246-750736edf5c6",
          "alias" : "Field Devices",
          "filter" : {
            "type" : "deviceSearchQuery",
            "resolveMultiple" : true,
            "rootStateEntity" : true,
            "stateEntityParamName" : "field",
            "defaultStateEntity" : null,
            "rootEntity" : null,
            "direction" : "FROM",
            "maxLevel" : 1,
            "fetchLastLevelOnly" : false,
            "relationType" : "Contains",
            "deviceTypes" : [ ]
          }
        }
      },
      "filters" : { },
      "timewindow" : {
        "hideAggregation" : false,
        "hideAggInterval" : false,
        "hideTimezone" : false,
        "selectedTab" : 0,
        "realtime" : {
          "realtimeType" : 0,
          "interval" : 1800000,
          "timewindowMs" : 7200000,
          "quickInterval" : "CURRENT_DAY",
          "hideInterval" : false,
          "hideLastInterval" : false,
          "hideQuickInterval" : false
        },
        "history" : {
          "historyType" : 0,
          "interval" : 1000,
          "timewindowMs" : 60000,
          "fixedTimewindow" : {
            "startTimeMs" : 1767568285417,
            "endTimeMs" : 1767654685417
          },
          "quickInterval" : "CURRENT_DAY",
          "hideInterval" : false,
          "hideLastInterval" : false,
          "hideFixedInterval" : false,
          "hideQuickInterval" : false
        },
        "aggregation" : {
          "type" : "AVG",
          "limit" : 25000
        },
        "timezone" : null
      },
      "settings" : {
        "stateControllerId" : "entity",
        "showTitle" : false,
        "showDashboardsSelect" : true,
        "showEntitiesSelect" : true,
        "showDashboardTimewindow" : true,
        "showDashboardExport" : true,
        "toolbarAlwaysOpen" : true,
        "titleColor" : "rgba(0,0,0,0.870588)",
        "showDashboardLogo" : false,
        "dashboardLogoUrl" : null,
        "hideToolbar" : false,
        "showFilters" : true,
        "showUpdateDashboardImage" : false,
        "dashboardCss" : ".tb-widget-container > .tb-widget {\n    border-radius: 8px;\n    box-shadow: 0px 4px 10px rgba(23, 33, 90, 0.08);\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-mdc-table .mat-mdc-header-cell {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-mdc-table .mat-mdc-cell {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-mdc-table .mat-mdc-header-cell .mat-sort-header-arrow {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-input-element::placeholder {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-input-element::-moz-placeholder {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-input-element::-webkit-input-placeholder {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-input-element:-ms-input-placeholder {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-mdc-table .mat-mdc-cell .mdc-checkbox__native-control:not(:indeterminate):not(:checked)~.mdc-checkbox__background, .tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-mdc-table .mat-mdc-header-cell .mdc-checkbox__native-control:not(:indeterminate):not(:checked)~.mdc-checkbox__background {\n    border-color : #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-mdc-table .mat-mdc-cell button.mat-mdc-icon-button mat-icon {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-mdc-paginator {\n    color: #868D9C !important;\n}\n\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-mdc-paginator button.mat-mdc-icon-button {\n    color: #868D9C !important;\n}\n\n.tb-dashboard-page .tb-widget-container > .tb-widget .tb-table-widget .mat-mdc-paginator .mat-mdc-select-value {\n    color: #868D9C !important;\n}\n\n/* Success Toast Notifications */\n.tb-toast-success {\n    background-color: #4caf50 !important;\n    color: white !important;\n}\n\n.tb-toast-error {\n    background-color: #d32f2f !important;\n    color: white !important;\n}\n\n.tb-toast-warning {\n    background-color: #ff9800 !important;\n    color: white !important;\n}\n\n/* Loading Indicators */\n.tb-loading-overlay {\n    background: rgba(255, 255, 255, 0.9);\n}\n\n/* Widget Enhancements */\n.tb-widget-container > .tb-widget {\n    transition: box-shadow 0.3s ease;\n}\n\n.tb-widget-container > .tb-widget:hover {\n    box-shadow: 0px 6px 15px rgba(23, 33, 90, 0.12);\n}\n"
      }
    },
    "externalId" : null,
    "id" : {
      "entityType" : "DASHBOARD",
      "id" : "fc3658e0-e83b-11f0-8920-f98bab6d1641"
    },
    "image" : null,
    "mobileHide" : false,
    "mobileOrder" : null,
    "name" : "Irrigation Management",
    "title" : "Irrigation Management"
  },
  "relations" : [ ],
  "attributes" : {
    "SERVER_SCOPE" : [ ]
  }
}