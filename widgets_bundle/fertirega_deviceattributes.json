{
  "entityType": "WIDGET_TYPE",
  "entity": {
    "tenantId": null,
    "bundleAlias": "fertirega_widgets",
    "typeAlias": "fertirega_deviceattributes",
    "alias": null,
    "title": "FertiRega Device Attributes",
    "image": null,
    "description": "Display device attributes and status information",
    "descriptor": {
      "type": "latest",
      "sizeX": 6,
      "sizeY": 3,
      "resources": [],
      "templateHtml": "<div class=\"device-attributes-container\">\n  <div class=\"attribute-row\">\n    <div class=\"attribute-item\">\n      <span class=\"attribute-icon\">\ud83d\udccd</span>\n      <div class=\"attribute-content\">\n        <span class=\"attribute-label\">Location</span>\n        <span class=\"attribute-value\">{{latitude | number:6}}, {{longitude | number:6}}</span>\n      </div>\n    </div>\n    <div class=\"attribute-item\">\n      <span class=\"attribute-icon\">\ud83d\udd0b</span>\n      <div class=\"attribute-content\">\n        <span class=\"attribute-label\">Battery</span>\n        <span class=\"attribute-value\">{{battery}}%</span>\n      </div>\n    </div>\n  </div>\n  <div class=\"attribute-row\">\n    <div class=\"attribute-item\">\n      <span class=\"attribute-icon\">\ud83c\udf21\ufe0f</span>\n      <div class=\"attribute-content\">\n        <span class=\"attribute-label\">Temperature</span>\n        <span class=\"attribute-value\">{{temperature | number:1}}\u00b0C</span>\n      </div>\n    </div>\n    <div class=\"attribute-item\">\n      <span class=\"attribute-icon\">\ud83d\udca7</span>\n      <div class=\"attribute-content\">\n        <span class=\"attribute-label\">Humidity</span>\n        <span class=\"attribute-value\">{{humidity | number:1}}%</span>\n      </div>\n    </div>\n  </div>\n  <div class=\"attribute-row\">\n    <div class=\"attribute-item\">\n      <span class=\"attribute-icon\">\u23f0</span>\n      <div class=\"attribute-content\">\n        <span class=\"attribute-label\">Last Activity</span>\n        <span class=\"attribute-value\">{{lastActivity | date:'short'}}</span>\n      </div>\n    </div>\n    <div class=\"attribute-item\">\n      <span class=\"attribute-icon\" ng-class=\"{'status-active': isActive, 'status-inactive': !isActive}\">\u25cf</span>\n      <div class=\"attribute-content\">\n        <span class=\"attribute-label\">Status</span>\n        <span class=\"attribute-value\">{{statusText}}</span>\n      </div>\n    </div>\n  </div>\n</div>",
      "templateCss": ".device-attributes-container {\n  padding: 16px;\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n  height: 100%;\n}\n\n.attribute-row {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 12px;\n}\n\n.attribute-row:last-child {\n  margin-bottom: 0;\n}\n\n.attribute-item {\n  display: flex;\n  align-items: center;\n  flex: 1;\n  padding: 8px;\n  background: #f5f5f5;\n  border-radius: 6px;\n  margin: 0 4px;\n}\n\n.attribute-item:first-child {\n  margin-left: 0;\n}\n\n.attribute-item:last-child {\n  margin-right: 0;\n}\n\n.attribute-icon {\n  font-size: 24px;\n  margin-right: 12px;\n}\n\n.status-active {\n  color: #4caf50;\n}\n\n.status-inactive {\n  color: #f44336;\n}\n\n.attribute-content {\n  display: flex;\n  flex-direction: column;\n}\n\n.attribute-label {\n  font-size: 11px;\n  color: #666;\n  text-transform: uppercase;\n  margin-bottom: 2px;\n}\n\n.attribute-value {\n  font-size: 14px;\n  color: #333;\n  font-weight: 500;\n}",
      "controllerScript": "self.onInit = function() {\n    self.ctx.$scope.latitude = 0;\n    self.ctx.$scope.longitude = 0;\n    self.ctx.$scope.battery = 0;\n    self.ctx.$scope.temperature = 0;\n    self.ctx.$scope.humidity = 0;\n    self.ctx.$scope.lastActivity = new Date();\n    self.ctx.$scope.isActive = false;\n    self.ctx.$scope.statusText = 'Offline';\n};\n\nself.onDataUpdated = function() {\n    if (self.ctx.data && self.ctx.data.length > 0) {\n        for (var i = 0; i < self.ctx.data.length; i++) {\n            var dataItem = self.ctx.data[i];\n            if (dataItem.data && dataItem.data.length > 0) {\n                var latestData = dataItem.data[0];\n                var dataKey = dataItem.dataKey.name;\n                \n                switch(dataKey) {\n                    case 'Server_Lat':\n                        self.ctx.$scope.latitude = latestData[1];\n                        break;\n                    case 'Server_Lon':\n                        self.ctx.$scope.longitude = latestData[1];\n                        break;\n                    case 'battery_percentage':\n                        self.ctx.$scope.battery = latestData[1];\n                        break;\n                    case 'temperature':\n                        self.ctx.$scope.temperature = latestData[1];\n                        break;\n                    case 'humidity':\n                        self.ctx.$scope.humidity = latestData[1];\n                        break;\n                    case 'active':\n                        self.ctx.$scope.isActive = latestData[1] === true || latestData[1] === 'true';\n                        self.ctx.$scope.statusText = self.ctx.$scope.isActive ? 'Active' : 'Offline';\n                        break;\n                }\n                \n                if (latestData[0]) {\n                    self.ctx.$scope.lastActivity = new Date(latestData[0]);\n                }\n            }\n        }\n        self.ctx.detectChanges();\n    }\n};\n\nself.onDestroy = function() {\n};",
      "settingsSchema": "{}",
      "dataKeySettingsSchema": "{}",
      "defaultConfig": "{}"
    }
  }
}